import{b as L,c as O,d as $,h as z,r as l,j as e,E as B,bb as T,B as h,I as D}from"./index-Bl7Wb9NM.js";import{M as G,a as R,b as U,c as A}from"./ModalFooter-B8hdW-Bi.js";import{L as H,a as J}from"./ListGroupItem-GfMzGrF7.js";import{u as W}from"./useGetPagedPersons-Bj90FuE8.js";import{P as q}from"./Pagination-BhizutCj.js";import{S as K}from"./Search-0lJeBueC.js";import{U as Q}from"./user-plus-DEVCzhyr.js";const V=t=>{const c=L();return O({mutationFn:async n=>{const o=await c(`${$}/api/persons/details`,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});return z(o)},...t})},te=({selectedPersonIds:t,onPersonSelectionChange:c,label:n="People",placeholder:o="Select people...",disabled:u=!1})=>{var P;const[d,v]=l.useState(!1),[p,j]=l.useState([]),[f,b]=l.useState(null),y=V(),[M,m]=l.useState(1),[g,C]=l.useState(10),[S,N]=l.useState(null),{data:i,isLoading:k}=W(M,g,S);l.useEffect(()=>{if(t.length===0){j([]);return}y.mutate({personIds:t},{onSuccess:s=>{j(s)},onError:b})},[t]);const r=()=>{d||(m(1),N(null)),v(!d)},E=s=>{N(s||null),m(1)},w=s=>{let a;t.includes(s)?a=t.filter(x=>x!==s):a=[...t,s],c(a)},F=s=>{const a=t.filter(x=>x!==s);c(a)};return f?e.jsx(B,{error:f}):e.jsxs("div",{className:"mb-3",children:[n&&e.jsx("label",{className:"form-label",children:n}),e.jsx("div",{className:"mb-2",children:p.length>0?e.jsx("div",{className:"d-flex flex-wrap gap-2",children:p.map(s=>e.jsxs(T,{color:"primary",className:"d-flex align-items-center p-2",children:[e.jsx("span",{className:"me-2",children:`${s.firstName} ${s.lastName}`}),e.jsx(h,{close:!0,size:"sm",onClick:()=>F(s.id),disabled:u})]},s.id))}):e.jsx("div",{className:"text-muted",children:o})}),e.jsxs(h,{color:"secondary",size:"sm",onClick:r,disabled:u,className:"d-flex align-items-center",children:[e.jsx(Q,{size:16,className:"me-1"}),e.jsx("span",{children:"Add People"})]}),e.jsxs(G,{isOpen:d,toggle:r,size:"lg",children:[e.jsx(R,{toggle:r,children:"Select People"}),e.jsxs(U,{children:[e.jsx("div",{className:"mb-3",children:e.jsx(K,{searchText:S,onSearch:E})}),e.jsx("div",{className:"mb-3",children:k?e.jsx("div",{className:"text-center p-3",children:"Loading..."}):(P=i==null?void 0:i.items)!=null&&P.length?e.jsx(H,{children:i.items.map(s=>e.jsxs(J,{action:!0,active:t.includes(s.id),onClick:()=>w(s.id),className:"d-flex justify-content-between align-items-center cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("div",{children:`${s.firstName} ${s.lastName}`}),e.jsx("small",{className:"text-muted",children:s.email})]}),e.jsx("div",{children:e.jsx(D,{type:"checkbox",checked:t.includes(s.id),onChange:()=>{},onClick:a=>a.stopPropagation()})})]},s.id))}):e.jsx("div",{className:"text-center p-3",children:"No people found"})}),i&&e.jsx(q,{pagedResult:i,onPageSelected:m,perPage:g,onPerPageSelected:C})]}),e.jsx(A,{children:e.jsx(h,{color:"secondary",onClick:r,children:"Close"})})]})]})};export{te as P,V as u};
//# sourceMappingURL=PersonSelector-BnFlDcwP.js.map
