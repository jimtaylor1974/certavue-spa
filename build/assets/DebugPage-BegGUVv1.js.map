{"version":3,"file":"DebugPage-BegGUVv1.js","sources":["../../src/api/sys/usePostAdminGeneratePeopleAndTeams.ts","../../src/components/sysadmin/DebugPage.tsx"],"sourcesContent":["import {EmptyResult} from '../../types';\r\nimport {useCreateAuthenticatedFetch} from '../useCreateAuthenticatedFetch';\r\nimport baseUrl from '../baseUrl';\r\nimport {handleResponse} from '../handleResponse';\r\nimport {\r\n    useMutation,\r\n    UseMutationResult,\r\n    UseMutationOptions\r\n} from '@tanstack/react-query';\r\n\r\nconst usePostAdminGeneratePeopleAndTeams = (\r\n    options?: UseMutationOptions<EmptyResult, Error, null>\r\n): UseMutationResult<EmptyResult, Error, null> => {\r\n    const authenticatedFetch = useCreateAuthenticatedFetch();\r\n\r\n    return useMutation({\r\n        mutationFn: async () => {\r\n            const response = await authenticatedFetch(\r\n                `${baseUrl}/api/admin/generate-people-and-teams`,\r\n                {\r\n                    method: 'POST',\r\n                    headers: {'Content-Type': 'application/json'},\r\n                    body: JSON.stringify({})\r\n                }\r\n            );\r\n            return handleResponse(response);\r\n        },\r\n        ...options\r\n    });\r\n};\r\n\r\nexport default usePostAdminGeneratePeopleAndTeams;","import React, {useState, useEffect} from 'react';\r\nimport {useAuthStateManager} from '../../hooks/useAuthStateManager';\r\nimport usePostAdminGeneratePeopleAndTeams from '../../api/sys/usePostAdminGeneratePeopleAndTeams';\r\nimport {toast} from 'react-toastify';\r\n\r\ninterface StorageData {\r\n    [key: string]: unknown;\r\n}\r\n\r\ninterface DebugStorageState {\r\n    localStorage: StorageData;\r\n    sessionStorage: StorageData;\r\n    cookies: StorageData;\r\n}\r\n\r\nconst DebugPage: React.FC = () => {\r\n    const authStateManager = useAuthStateManager();\r\n    const [storageData, setStorageData] = useState<DebugStorageState>({\r\n        localStorage: {},\r\n        sessionStorage: {},\r\n        cookies: {}\r\n    });\r\n\r\n    const postAdminGeneratePeopleAndTeams = usePostAdminGeneratePeopleAndTeams();\r\n\r\n    useEffect(() => {\r\n        // Get localStorage data\r\n        const localStorageData: StorageData = {};\r\n        for (let i = 0; i < localStorage.length; i++) {\r\n            const key = localStorage.key(i);\r\n            if (key) {\r\n                try {\r\n                    localStorageData[key] = JSON.parse(\r\n                        localStorage.getItem(key) || ''\r\n                    );\r\n                } catch (e) {\r\n                    localStorageData[key] = localStorage.getItem(key);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Get sessionStorage data\r\n        const sessionStorageData: StorageData = {};\r\n        for (let i = 0; i < sessionStorage.length; i++) {\r\n            const key = sessionStorage.key(i);\r\n            if (key) {\r\n                try {\r\n                    sessionStorageData[key] = JSON.parse(\r\n                        sessionStorage.getItem(key) || ''\r\n                    );\r\n                } catch (e) {\r\n                    sessionStorageData[key] = sessionStorage.getItem(key);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Get cookies\r\n        const cookiesData: StorageData = {};\r\n        document.cookie.split(';').forEach(cookie => {\r\n            if (cookie.trim()) {\r\n                const [key, value] = cookie.trim().split('=');\r\n                if (key) {\r\n                    cookiesData[key] = value;\r\n                }\r\n            }\r\n        });\r\n\r\n        setStorageData({\r\n            localStorage: localStorageData,\r\n            sessionStorage: sessionStorageData,\r\n            cookies: cookiesData\r\n        });\r\n\r\n        // Set up global function\r\n        const generatePeopleAndTeams = () => {\r\n            postAdminGeneratePeopleAndTeams.mutate(null, {\r\n                onSuccess: async () => {\r\n                    toast.success('Successfully generated people and teams data.');\r\n                },\r\n                onError: (error: Error) => {\r\n                    console.error(error);\r\n                    toast.error(`Failed to generate people and teams: ${error.message}`);\r\n                }\r\n            });\r\n        };\r\n\r\n        window.generatePeopleAndTeams = generatePeopleAndTeams;\r\n\r\n        // Cleanup function\r\n        return () => {\r\n            delete window.generatePeopleAndTeams;\r\n        };\r\n    }, [postAdminGeneratePeopleAndTeams]);\r\n\r\n    return (\r\n        <div className=\"container mt-4\">\r\n            <h1 className=\"display-4\">Debug Page</h1>\r\n\r\n            <div className=\"card mb-4\">\r\n                <div className=\"card-header bg-primary text-white\">\r\n                    <h2 className=\"h5 mb-0\">Auth State</h2>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                    <pre className=\"mb-0\">\r\n                        {JSON.stringify(authStateManager.authData, null, 2)}\r\n                    </pre>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"card mb-4\">\r\n                <div className=\"card-header bg-success text-white\">\r\n                    <h2 className=\"h5 mb-0\">Local Storage</h2>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                    <pre className=\"mb-0\">\r\n                        {JSON.stringify(storageData.localStorage, null, 2)}\r\n                    </pre>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"card mb-4\">\r\n                <div className=\"card-header bg-info text-white\">\r\n                    <h2 className=\"h5 mb-0\">Session Storage</h2>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                    <pre className=\"mb-0\">\r\n                        {JSON.stringify(storageData.sessionStorage, null, 2)}\r\n                    </pre>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"card mb-4\">\r\n                <div className=\"card-header bg-warning text-dark\">\r\n                    <h2 className=\"h5 mb-0\">Cookies</h2>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                    <pre className=\"mb-0\">\r\n                        {JSON.stringify(storageData.cookies, null, 2)}\r\n                    </pre>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DebugPage;\r\n"],"names":["usePostAdminGeneratePeopleAndTeams","options","authenticatedFetch","useCreateAuthenticatedFetch","useMutation","response","baseUrl","handleResponse","DebugPage","authStateManager","useAuthStateManager","storageData","setStorageData","useState","postAdminGeneratePeopleAndTeams","useEffect","localStorageData","i","key","sessionStorageData","cookiesData","cookie","value","generatePeopleAndTeams","toast","error","jsxs","jsx"],"mappings":"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"}