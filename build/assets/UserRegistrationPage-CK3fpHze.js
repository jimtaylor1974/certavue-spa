import{b as q,c as O,d as B,h as M,u as U,f as W,k as G,r as m,j as e,e as J,C as $,G as z,I as r,B as H,A as V,L as b,b6 as C,b7 as S}from"./index-C-RVz6Ax.js";import{u as Y,C as c,D as d}from"./DisplayFormError-ye2fRgMX.js";import{R as _,C as F}from"./Col-BQD9N-5w.js";import{C as K,a as Q}from"./CardBody-sAodfdc3.js";import{F as t,L as i}from"./Label-jeggPgyg.js";import{F as k}from"./FormText-DwCcsiID.js";import{u as X}from"./useUserRegistrationBuiltIn--ZNokFy0.js";import{T as ee}from"./TermsAndConditions-CnB805Kc.js";import{i as g}from"./isNullOrWhiteSpace-D2HOxx4J.js";import{S as se}from"./SocialLogins-CSD20D3q.js";import{C as ae}from"./CheckFromEmailSpamJunkWarning-CRVbGiep.js";import"./types-46npvi_j.js";import"./useSocialAuthLogin-B6wz3HWI.js";const re=u=>{const h=q();return O({mutationFn:async n=>{const o=await h(`${B}/api/auth/user-registration-email-login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return M(o)},...u})},ge=()=>{const{getSignInRedirect:u,removeSignInRedirect:h}=U(),{auth:n}=W(),o=G(),E=n.microsoft.enabled||n.google.enabled,L=Intl.DateTimeFormat().resolvedOptions().timeZone,{control:l,handleSubmit:R,formState:{errors:a},clearErrors:T,watch:A}=Y({defaultValues:{firstName:"",lastName:"",email:"",password:"",timeZone:L,redir:u()},mode:"onChange"}),[x,I]=m.useState(!1),[f,p]=m.useState(null),N=A(),[y,P]=m.useState(!1);m.useEffect(()=>{const{firstName:s,lastName:j,email:Z}=N;P(!g(s)&&!g(j)&&!g(Z))},[N]);const v=re({onSuccess:()=>{S.success("Registration successful! Please check your email for further instructions."),o("/login")},onError:s=>{p(C(s))}}),w=X({onSuccess:()=>{S.success("Registration successful! Please check your email and follow the instructions to verify your account."),o("/login")},onError:s=>{p(C(s))}}),D=s=>{if(h(),p(null),T(),s.password){const j={firstName:s.firstName,lastName:s.lastName,email:s.email,password:s.password,timeZone:s.timeZone,redir:s.redir};w.mutate(j)}else v.mutate(s)};return e.jsx(e.Fragment,{children:e.jsx(J,{className:"mt-5",children:e.jsxs(_,{className:"justify-content-center",children:[e.jsxs(F,{xs:12,md:8,lg:6,children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx($,{}),e.jsx("h2",{className:"mt-2",children:"Sign up"}),e.jsx("p",{className:"text-muted",children:"Create a user login"})]}),E&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-center small",children:"Register using a social login …"}),e.jsx("div",{className:"my-3",children:e.jsx(se,{registration:!0})}),e.jsx("p",{className:"text-center small",children:"… or create an account with email …"})]}),e.jsx(K,{children:e.jsx(Q,{children:e.jsxs(z,{onSubmit:R(D),children:[e.jsxs(t,{children:[e.jsx(i,{for:"email",children:"Email"}),e.jsx(c,{name:"email",control:l,rules:{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}},render:({field:s})=>e.jsx(r,{...s,type:"email",id:"email",maxLength:2048,invalid:!!a.email})}),e.jsx(d,{error:a.email,fieldDisplayName:"Email"})]}),e.jsx(ae,{text:"Please check your email and follow the instructions to verify your account."}),e.jsxs(t,{children:[e.jsx(i,{for:"firstName",children:"First Name"}),e.jsx(c,{name:"firstName",control:l,rules:{required:"First Name is required"},render:({field:s})=>e.jsx(r,{...s,type:"text",id:"firstName",maxLength:512,invalid:!!a.firstName})}),e.jsx(d,{error:a.firstName,fieldDisplayName:"First Name"})]}),e.jsxs(t,{children:[e.jsx(i,{for:"lastName",children:"Last Name"}),e.jsx(c,{name:"lastName",control:l,rules:{required:"Last Name is required"},render:({field:s})=>e.jsx(r,{...s,type:"text",id:"lastName",maxLength:512,invalid:!!a.lastName})}),e.jsx(d,{error:a.lastName,fieldDisplayName:"Last Name"})]}),e.jsxs(t,{children:[e.jsx(i,{for:"password",children:"Password (Optional)"}),e.jsx(c,{name:"password",control:l,render:({field:s})=>e.jsx(r,{...s,type:"password",id:"password",invalid:!!a.password})}),e.jsx(k,{className:"text-muted small",children:"Leave blank to sign up with email only. You'll receive a login link via email."}),e.jsx(d,{error:a.password,fieldDisplayName:"Password"})]}),e.jsxs(t,{check:!0,className:"my-3",children:[e.jsx(r,{type:"checkbox",required:!0,id:"acceptTerms",checked:x,onChange:s=>I(s.target.checked)}),e.jsx(i,{for:"acceptTerms",check:!0,children:"I have read and accept the Terms and Conditions"})]}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsx(H,{type:"submit",color:"primary",disabled:!x||!y||v.isPending||w.isPending,children:"Submit"})}),y&&!x&&e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsx(k,{color:"danger",className:"small",children:"Please read and accept the Terms and Conditions"})}),f&&e.jsx(V,{color:"danger",className:"mt-3",children:f})]})})})]}),e.jsxs(F,{xs:12,md:8,lg:6,children:[e.jsx("h3",{className:"text-lavender mb-3",children:"Need something else?"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-mulled-wine",children:"Already have an account?"}),e.jsxs("p",{children:["If you've previously signed up,"," ",e.jsx(b,{to:"/login",children:"Log in"})," here to access your company's projects."]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-mulled-wine",children:"Want to bring certavue to your company?"}),e.jsxs("p",{children:["Easily"," ",e.jsx(b,{to:"/register-company",className:"text-primary font-weight-bold",children:"Register your Company"})," ","and simplify how your organization manages transformation."]})]}),e.jsx("div",{style:{maxHeight:"200px",overflow:"auto",border:"1px solid #ced4da",borderRadius:".25rem",padding:"10px"},children:e.jsx(ee,{})})]})]})})})};export{ge as default};
//# sourceMappingURL=UserRegistrationPage-CK3fpHze.js.map
