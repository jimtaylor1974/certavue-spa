import{b as R,c as w,d as A,h as P,u as I,k as O,g as _,r as x,j as e,G as L,I as m,E as U,B as q,b6 as Z,b7 as s}from"./index-C-RVz6Ax.js";import{F as d,L as h}from"./Label-jeggPgyg.js";import{F as B}from"./FormContainer-CL9hVgXs.js";import{C as G}from"./CheckFromEmailSpamJunkWarning-CRVbGiep.js";const J=n=>{const i=R();return w({mutationFn:async o=>{const r=await i(`${A}/api/auth/user-registration-social`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});return P(r)},...n})},H=()=>{const{getSignInRedirect:n,onAuthenticated:i,redirectOnAuthenticated:o}=I(),r=O(),{state:j}=_(),[y,N]=x.useState(null),S=Intl.DateTimeFormat().resolvedOptions().timeZone,{provider:f,token:g,firstName:b,lastName:E,email:p}=j,[a,k]=x.useState({firstName:b||"",lastName:E||"",email:p||"",provider:f,token:g,timeZone:S,redir:n()}),u=J();if(!f||!g)return r("/"),null;const F=t=>{if(t.authTokens&&t.authTokens.access_token&&t.authTokens.refresh_token){i(t.authTokens),s.success("Account created."),o();return}t.authError&&t.authError.error=="unconfirmed_email"?t.authError.error=="unconfirmed_email"?s.success("Please check your email and follow the instructions to verify your account."):s.error(t.authError.error_description):s.error("We were unable to register your account."),r("/login")},v=t=>{t.preventDefault(),u.mutate(a,{onSuccess:F,onError:l=>{N(Z(l))}})},c=t=>{const{name:l,value:C}=t.target;k(T=>({...T,[l]:C}))};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"mb-4",children:"Complete user registration"}),e.jsxs(B,{children:[e.jsxs(L,{onSubmit:v,children:[e.jsxs(d,{children:[e.jsx(h,{for:"email",children:"Email"}),e.jsx(m,{type:"email",name:"email",id:"email",value:a.email,onChange:c,required:!0,readOnly:!!p})]}),e.jsxs(d,{children:[e.jsx(h,{for:"firstName",children:"First Name"}),e.jsx(m,{type:"text",name:"firstName",id:"firstName",value:a.firstName,onChange:c,required:!0})]}),e.jsxs(d,{children:[e.jsx(h,{for:"lastName",children:"Last Name"}),e.jsx(m,{type:"text",name:"lastName",id:"lastName",value:a.lastName,onChange:c,required:!0})]}),e.jsx(U,{error:y}),e.jsx(q,{type:"submit",color:"primary",disabled:u.isPending,children:u.isPending?"Submitting...":"Submit"})]}),e.jsx(G,{text:"Please check your email and follow the instructions to verify your account."})]})]})};export{H as default};
//# sourceMappingURL=UserRegistrationSocialPage-m14Qh-tu.js.map
