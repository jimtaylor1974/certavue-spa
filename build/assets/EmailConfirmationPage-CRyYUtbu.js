import{b as p,c as g,d as E,h as x,u as j,k as y,r as c,b8 as S,b7 as b,j as e,E as A}from"./index-CdmDVAN5.js";import{S as C}from"./Spinner-CJV5cRrt.js";const F=a=>{const t=p();return g({mutationFn:async s=>{const n=await t(`${E}/api/auth/email-confirmation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return x(n)},...a})},v=()=>{const{setSignInRedirect:a}=j(),t=y(),[s,n]=c.useState(null),[h,m]=c.useState(!1),[i]=S(),r=i.get("user_id"),o=i.get("token"),l=i.get("redir"),u=F();return c.useEffect(()=>{if(r&&o){l&&a(l),m(!0);const f={userId:r,token:o};u.mutateAsync(f).then(()=>{b.success("Email verified."),t("/login")}).catch(d=>{n(d)}).finally(()=>{m(!1)})}else t("/login")},[r,o,t,u]),h?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"h1",children:"Email confirmation"}),e.jsx(C,{})]}):s?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"h1",children:"Email confirmation"}),e.jsx(A,{error:s,title:"Unable to verify email",onDismiss:()=>t("/")})]}):e.jsx("h1",{className:"h1",children:"Email confirmation"})};export{v as default};
//# sourceMappingURL=EmailConfirmationPage-CRyYUtbu.js.map
