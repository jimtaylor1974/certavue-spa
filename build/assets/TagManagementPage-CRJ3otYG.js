import{b as w,c as k,d as E,h as I,r as l,j as e,I as T,E as b,B as j,b7 as A,S as $}from"./index-Bl7Wb9NM.js";import{R as G,C as S}from"./Col-sHY0dGyA.js";import{C as _,a as J}from"./CardBody-CJUybPPm.js";import{T as q}from"./Table-krS3qWXI.js";import{T as y,D as N,n as P,P as M,a as z,f as H,u as Y}from"./tags-DxvE4Kaf.js";import{S as K}from"./Spinner-B9jIRH-a.js";import{M as F,a as R,b as D,c as U}from"./ModalFooter-B8hdW-Bi.js";import{F as p,L as u}from"./Label-BIINRblL.js";import{P as v}from"./plus-C8fzuWXN.js";import"./arrow-left-3DbrsKA6.js";import"./trending-up-C5s1qxMk.js";import"./folder-C4c4higD.js";import"./triangle-alert-BdpRIMlc.js";import"./refresh-cw-CRuoWAWq.js";import"./chevron-left-DAi6S7yP.js";import"./chevron-up-B5j3ton0.js";import"./search-BCB5KbnU.js";import"./circle-plus-kiG0u9Lr.js";import"./clock-CMbMTgmt.js";import"./ellipsis-vertical-CplRCHcL.js";import"./eye-off-51c7W_Wf.js";import"./eye-638J84wA.js";import"./file-pen-DiXDs81D.js";import"./folder-up-C9tJmIQa.js";import"./log-in-BFPPB7yH.js";import"./mouse-pointer-click-DFOn3xUO.js";import"./play-BCRVbiQZ.js";import"./save-Dwy-qhEz.js";import"./share-2-1FER1Alx.js";import"./trash-2-B6cN-Vgi.js";import"./user-plus-DEVCzhyr.js";const Q=()=>{const r=w();return k({mutationFn:async t=>{const i=await r(`${E}/api/tags`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return I(i)}})},V=({isOpen:r,toggle:t,onTagCreated:i})=>{const[o,n]=l.useState(""),[m,h]=l.useState(y.colour),[x,d]=l.useState(y.icon),c=Q(),g=async()=>{const s=H(o);if(s)try{await c.mutateAsync({name:s,colour:m,icon:x,isActive:!0}),A.success("Tag created successfully"),i(),t(),n(""),h(y.colour),d(y.icon)}catch{}},C=l.useMemo(()=>({id:null,name:o||"preview",colour:m,icon:x,isActive:!0}),[o,m,x]);return e.jsxs(F,{isOpen:r,toggle:t,size:"md",children:[e.jsx(R,{toggle:t,children:"Create Tag"}),e.jsxs(D,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Preview"}),e.jsx("div",{children:e.jsx(N,{tag:C})})]}),e.jsxs(p,{children:[e.jsx(u,{for:"tagName",children:"Name *"}),e.jsx(T,{id:"tagName",value:o,onChange:s=>{const f=P(s.target.value);n(f)},placeholder:"Enter tag name..."})]}),e.jsxs(p,{children:[e.jsx(u,{children:"Color"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mt-2",children:M.map(s=>e.jsx("div",{onClick:()=>h(s),style:{width:"32px",height:"32px",backgroundColor:s,borderRadius:"6px",cursor:"pointer",border:m===s?"3px solid #000":"2px solid #e5e7eb",transition:"all 0.2s ease"},title:s},s))})]}),e.jsxs(p,{children:[e.jsx(u,{children:"Icon"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mt-2",children:z.map(s=>{const f=s.component;return e.jsx("div",{onClick:()=>d(s.name),style:{width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",cursor:"pointer",border:x===s.name?"2px solid #007bff":"2px solid #e5e7eb",backgroundColor:x===s.name?"#f8f9fa":"transparent",transition:"all 0.2s ease"},title:s.name,children:e.jsx(f,{size:20})},s.name)})})]}),e.jsx(b,{error:c.error})]}),e.jsxs(U,{children:[e.jsx(j,{color:"primary",onClick:g,disabled:c.isPending||!o.trim(),children:c.isPending?"Creating...":"Create Tag"}),e.jsx(j,{color:"secondary",onClick:t,children:"Cancel"})]})]})},W=r=>{const t=w();return k({mutationFn:async i=>{const o=await t(`${E}/api/tags/${i.id}`,{method:"PUT",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}});return I(o)},...r})},X=({tag:r,isOpen:t,toggle:i,onTagUpdated:o})=>{const[n,m]=l.useState(r.name),[h,x]=l.useState(r.colour),[d,c]=l.useState(r.icon),[g,C]=l.useState(r.isActive),s=W();l.useEffect(()=>{m(r.name),x(r.colour),c(r.icon),C(r.isActive)},[r]);const f=l.useMemo(()=>({id:r.id,name:P(n)||"preview",colour:h,icon:d,isActive:g}),[r.id,n,h,d,g]),L=async()=>{try{await s.mutateAsync({id:r.id,name:n,colour:h,icon:d,isActive:g}),A.success("Tag updated successfully"),o(),i()}catch{}};return e.jsxs(F,{isOpen:t,toggle:i,size:"md",children:[e.jsx(R,{toggle:i,children:"Edit Tag"}),e.jsxs(D,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Preview"}),e.jsx("div",{children:e.jsx(N,{tag:f})})]}),e.jsxs(p,{children:[e.jsx(u,{for:"tagName",children:"Name *"}),e.jsx(T,{id:"tagName",value:n,onChange:a=>m(a.target.value),placeholder:"Enter tag name..."})]}),e.jsxs(p,{children:[e.jsx(u,{children:"Color"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mt-2",children:M.map(a=>e.jsx("div",{onClick:()=>x(a),style:{width:"32px",height:"32px",backgroundColor:a,borderRadius:"6px",cursor:"pointer",border:h===a?"3px solid #000":"2px solid #e5e7eb",transition:"all 0.2s ease"},title:a},a))})]}),e.jsxs(p,{children:[e.jsx(u,{children:"Icon"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mt-2",children:z.map(a=>{const B=a.component;return e.jsx("div",{onClick:()=>c(a.name),style:{width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",cursor:"pointer",border:d===a.name?"2px solid #007bff":"2px solid #e5e7eb",backgroundColor:d===a.name?"#f8f9fa":"transparent",transition:"all 0.2s ease"},title:a.name,children:e.jsx(B,{size:20})},a.name)})})]}),e.jsx(p,{check:!0,children:e.jsxs(u,{check:!0,children:[e.jsx(T,{type:"checkbox",checked:g,onChange:a=>C(a.target.checked)})," ","Active"]})}),e.jsx(b,{error:s.error})]}),e.jsxs(U,{children:[e.jsx(j,{color:"primary",onClick:L,disabled:s.isPending||!n.trim(),children:s.isPending?"Saving...":"Save Changes"}),e.jsx(j,{color:"secondary",onClick:i,children:"Cancel"})]})]})},Ie=()=>{const[r,t]=l.useState(!1),[i,o]=l.useState(null),{data:n,error:m,isLoading:h,refetch:x}=Y();if(h)return e.jsx(K,{});if(m)return e.jsx(b,{error:m,title:"Error fetching tags"});const d=()=>{o(null),t(!1),x()};return e.jsxs(e.Fragment,{children:[e.jsxs(G,{className:"mb-4 align-items-center",children:[e.jsx(S,{children:e.jsx("h1",{className:"mb-0",children:"Tag Management"})}),e.jsx(S,{xs:"auto",children:e.jsxs(j,{color:"primary",onClick:()=>t(!0),children:[e.jsx(v,{size:18,className:"me-1"}),"Create Tag"]})})]}),e.jsx(V,{isOpen:r,toggle:()=>t(!1),onTagCreated:d}),i&&e.jsx(X,{tag:i,isOpen:i!==null,toggle:()=>o(null),onTagUpdated:d}),e.jsx(_,{children:e.jsxs(J,{children:[e.jsxs(q,{responsive:!0,hover:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Tag Preview"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:n==null?void 0:n.map(c=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(N,{tag:c})}),e.jsx("td",{children:e.jsx("span",{className:"fw-medium",children:c.name})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${c.isActive?"bg-success":"bg-secondary"}`,children:c.isActive?"Active":"Inactive"})}),e.jsx("td",{children:e.jsx("div",{className:"d-flex gap-2",children:e.jsxs(j,{size:"sm",color:"primary",outline:!0,onClick:()=>o(c),children:[e.jsx($,{size:14,className:"me-1"}),"Edit"]})})})]},c.id))})]}),(!n||n.length===0)&&e.jsxs("div",{className:"text-center py-5 text-muted",children:[e.jsx("div",{className:"mb-3",children:e.jsx(v,{size:48,className:"text-muted"})}),e.jsx("h5",{children:"No tags found"}),e.jsx("p",{children:"Create your first tag to get started with organizing your projects."}),e.jsxs(j,{color:"primary",onClick:()=>t(!0),children:[e.jsx(v,{size:18,className:"me-1"}),"Create Your First Tag"]})]})]})})]})};export{Ie as default};
//# sourceMappingURL=TagManagementPage-CRJ3otYG.js.map
