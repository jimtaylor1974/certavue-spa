import{b as p,c as g,d as E,h as x,u as j,k as y,r as m,b8 as S,b7 as b,j as e,E as A}from"./index-C1gMn5ii.js";import{S as C}from"./Spinner-CxTc82sK.js";const F=s=>{const t=p();return g({mutationFn:async a=>{const n=await t(`${E}/api/auth/email-confirmation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});return x(n)},...s})},v=()=>{const{setSignInRedirect:s}=j(),t=y(),[a,n]=m.useState(null),[u,l]=m.useState(!1),[i]=S(),r=i.get("user_id"),o=i.get("token"),c=i.get("redir"),h=F();return m.useEffect(()=>{if(r&&o){c&&s(c),l(!0);const f={userId:r,token:o};h.mutateAsync(f).then(()=>{b.success("Email verified."),t("/login")}).catch(d=>{n(d)}).finally(()=>{l(!1)})}else t("/login")},[r,o,t,c,s]),u?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"h1",children:"Email confirmation"}),e.jsx(C,{})]}):a?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"h1",children:"Email confirmation"}),e.jsx(A,{error:a,title:"Unable to verify email",onDismiss:()=>t("/")})]}):e.jsx("h1",{className:"h1",children:"Email confirmation"})};export{v as default};
//# sourceMappingURL=EmailConfirmationPage-BdCQmXhd.js.map
