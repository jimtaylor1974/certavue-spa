{"version":3,"file":"useUploadContentFile-BAjRUr0Y.js","sources":["../../src/api/contents/useUploadContentFile.ts"],"sourcesContent":["import {\r\n    useMutation,\r\n    UseMutationResult,\r\n    UseMutationOptions,\r\n    useQueryClient\r\n} from '@tanstack/react-query';\r\nimport baseUrl from '../baseUrl';\r\nimport {useCreateAuthenticatedFetch} from '../useCreateAuthenticatedFetch';\r\nimport {handleResponse} from '../handleResponse';\r\nimport {ContentItem} from '../../types.ts';\r\n\r\nconst useUploadContentFile = (\r\n    options?: UseMutationOptions<ContentItem, Error, {path: string; file: File}>\r\n): UseMutationResult<ContentItem, Error, {path: string; file: File}> => {\r\n    const authenticatedFetch = useCreateAuthenticatedFetch();\r\n    const queryClient = useQueryClient();\r\n\r\n    return useMutation({\r\n        mutationFn: async ({path, file}: {path: string; file: File}) => {\r\n            const formData = new FormData();\r\n            formData.append('file', file);\r\n\r\n            const response = await authenticatedFetch(\r\n                `${baseUrl}/api/sys/contents/${path}`,\r\n                {\r\n                    method: 'POST',\r\n                    body: formData\r\n                    // Don't set Content-Type header here, it will be set automatically with the boundary\r\n                }\r\n            );\r\n\r\n            return handleResponse(response);\r\n        },\r\n        onSuccess: () => {\r\n            // Invalidate relevant queries when a file is uploaded\r\n            queryClient.invalidateQueries({queryKey: ['contents']});\r\n        },\r\n        ...options\r\n    });\r\n};\r\n\r\nexport default useUploadContentFile;\r\n"],"names":["useUploadContentFile","options","authenticatedFetch","useCreateAuthenticatedFetch","queryClient","useQueryClient","useMutation","path","file","formData","response","baseUrl","handleResponse"],"mappings":"+DAWM,MAAAA,EACFC,GACoE,CACpE,MAAMC,EAAqBC,EAA4B,EACjDC,EAAcC,EAAe,EAEnC,OAAOC,EAAY,CACf,WAAY,MAAO,CAAC,KAAAC,EAAM,KAAAC,KAAsC,CACtD,MAAAC,EAAW,IAAI,SACZA,EAAA,OAAO,OAAQD,CAAI,EAE5B,MAAME,EAAW,MAAMR,EACnB,GAAGS,CAAO,qBAAqBJ,CAAI,GACnC,CACI,OAAQ,OACR,KAAME,CAAA,CAGd,EAEA,OAAOG,EAAeF,CAAQ,CAClC,EACA,UAAW,IAAM,CAEbN,EAAY,kBAAkB,CAAC,SAAU,CAAC,UAAU,EAAE,CAC1D,EACA,GAAGH,CAAA,CACN,CACL"}