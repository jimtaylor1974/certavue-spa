{"version":3,"file":"ChangePasswordPage-D-s54oi7.js","sources":["../../src/api/auth/useChangePassword.ts","../../src/components/accounts/ChangePasswordPage.tsx"],"sourcesContent":["import {\r\n    useMutation,\r\n    UseMutationOptions,\r\n    UseMutationResult\r\n} from '@tanstack/react-query';\r\nimport {ChangePasswordCommand, EmptyResult} from '../../types';\r\nimport {useCreateAuthenticatedFetch} from '../useCreateAuthenticatedFetch';\r\nimport baseUrl from '../baseUrl';\r\nimport {handleResponse} from '../handleResponse';\r\n\r\nconst useChangePassword = (\r\n    options?: UseMutationOptions<EmptyResult, Error, ChangePasswordCommand>\r\n): UseMutationResult<EmptyResult, Error, ChangePasswordCommand> => {\r\n    const authenticatedFetch = useCreateAuthenticatedFetch();\r\n\r\n    return useMutation({\r\n        mutationFn: async (command: ChangePasswordCommand) => {\r\n            const response = await authenticatedFetch(\r\n                `${baseUrl}/api/auth/change-password`,\r\n                {\r\n                    method: 'POST',\r\n                    headers: {'Content-Type': 'application/json'},\r\n                    body: JSON.stringify(command)\r\n                }\r\n            );\r\n            return handleResponse(response);\r\n        },\r\n        ...options\r\n    });\r\n};\r\n\r\nexport default useChangePassword;\r\n","import React, {useState} from 'react';\r\nimport {\r\n    Container,\r\n    Row,\r\n    Col,\r\n    Form,\r\n    FormGroup,\r\n    Label,\r\n    Input,\r\n    Button\r\n} from 'reactstrap';\r\nimport useChangePassword from '../../api/auth/useChangePassword';\r\nimport {ChangePasswordCommand} from '../../types';\r\nimport {toast} from 'react-toastify';\r\n\r\nconst ChangePassword = () => {\r\n    const getChangePassword = (): ChangePasswordCommand => ({\r\n        oldPassword: '',\r\n        newPassword: '',\r\n        confirmPassword: ''\r\n    });\r\n\r\n    const [changePassword, setChangePassword] =\r\n        useState<ChangePasswordCommand>(getChangePassword());\r\n\r\n    const {mutate} = useChangePassword();\r\n\r\n    const onSubmitSuccess = () => {\r\n        toast.success('Your password has been changed.');\r\n        setChangePassword(getChangePassword());\r\n    };\r\n\r\n    const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n        e.preventDefault();\r\n        mutate(changePassword, {onSuccess: onSubmitSuccess});\r\n    };\r\n\r\n    const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const {name, value} = e.target;\r\n        setChangePassword(prev => ({...prev, [name]: value}));\r\n    };\r\n\r\n    return (\r\n        <Container>\r\n            <Row>\r\n                <Col>\r\n                    <h1 className=\"mb-4\">Change password</h1>\r\n                    <Form onSubmit={handleSubmit}>\r\n                        <FormGroup>\r\n                            <Label for=\"oldPassword\">Old Password</Label>\r\n                            <Input\r\n                                type=\"password\"\r\n                                name=\"oldPassword\"\r\n                                id=\"oldPassword\"\r\n                                value={changePassword.oldPassword}\r\n                                onChange={handleInputChange}\r\n                                required\r\n                            />\r\n                        </FormGroup>\r\n                        <FormGroup>\r\n                            <Label for=\"newPassword\">New Password</Label>\r\n                            <Input\r\n                                type=\"password\"\r\n                                name=\"newPassword\"\r\n                                id=\"newPassword\"\r\n                                value={changePassword.newPassword}\r\n                                onChange={handleInputChange}\r\n                                required\r\n                            />\r\n                        </FormGroup>\r\n                        <FormGroup>\r\n                            <Label for=\"confirmPassword\">\r\n                                Confirm Password\r\n                            </Label>\r\n                            <Input\r\n                                type=\"password\"\r\n                                name=\"confirmPassword\"\r\n                                id=\"confirmPassword\"\r\n                                value={changePassword.confirmPassword}\r\n                                onChange={handleInputChange}\r\n                                required\r\n                            />\r\n                        </FormGroup>\r\n                        <Button type=\"submit\" color=\"primary\">\r\n                            Change Password\r\n                        </Button>\r\n                    </Form>\r\n                </Col>\r\n            </Row>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default ChangePassword;\r\n"],"names":["useChangePassword","options","authenticatedFetch","useCreateAuthenticatedFetch","useMutation","command","response","baseUrl","handleResponse","ChangePassword","getChangePassword","changePassword","setChangePassword","useState","mutate","onSubmitSuccess","toast","handleSubmit","e","handleInputChange","name","value","prev","jsx","Container","Row","Col","jsxs","Form","FormGroup","Label","Input","Button"],"mappings":"2MAUA,MAAMA,EACFC,GAC+D,CAC/D,MAAMC,EAAqBC,EAA4B,EAEvD,OAAOC,EAAY,CACf,WAAY,MAAOC,GAAmC,CAClD,MAAMC,EAAW,MAAMJ,EACnB,GAAGK,CAAO,4BACV,CACI,OAAQ,OACR,QAAS,CAAC,eAAgB,kBAAkB,EAC5C,KAAM,KAAK,UAAUF,CAAO,CAAA,CAEpC,EACA,OAAOG,EAAeF,CAAQ,CAClC,EACA,GAAGL,CAAA,CACN,CACL,ECdMQ,EAAiB,IAAM,CACzB,MAAMC,EAAoB,KAA8B,CACpD,YAAa,GACb,YAAa,GACb,gBAAiB,EAAA,GAGf,CAACC,EAAgBC,CAAiB,EACpCC,EAAA,SAAgCH,GAAmB,EAEjD,CAAC,OAAAI,CAAM,EAAId,EAAkB,EAE7Be,EAAkB,IAAM,CAC1BC,EAAM,QAAQ,iCAAiC,EAC/CJ,EAAkBF,GAAmB,CACzC,EAEMO,EAAgBC,GAAwC,CAC1DA,EAAE,eAAe,EACjBJ,EAAOH,EAAgB,CAAC,UAAWI,CAAA,CAAgB,CACvD,EAEMI,EAAqBD,GAA2C,CAClE,KAAM,CAAC,KAAAE,EAAM,MAAAC,CAAK,EAAIH,EAAE,OACNN,EAAAU,IAAS,CAAC,GAAGA,EAAM,CAACF,CAAI,EAAGC,GAAO,CACxD,EAEA,OACKE,MAAAC,EAAA,CACG,SAACD,EAAA,IAAAE,EAAA,CACG,gBAACC,EACG,CAAA,SAAA,CAACH,EAAA,IAAA,KAAA,CAAG,UAAU,OAAO,SAAe,kBAAA,EACpCI,EAAAA,KAACC,EAAK,CAAA,SAAUX,EACZ,SAAA,CAAAU,OAACE,EACG,CAAA,SAAA,CAACN,EAAA,IAAAO,EAAA,CAAM,IAAI,cAAc,SAAY,eAAA,EACrCP,EAAA,IAACQ,EAAA,CACG,KAAK,WACL,KAAK,cACL,GAAG,cACH,MAAOpB,EAAe,YACtB,SAAUQ,EACV,SAAQ,EAAA,CAAA,CACZ,EACJ,SACCU,EACG,CAAA,SAAA,CAACN,EAAA,IAAAO,EAAA,CAAM,IAAI,cAAc,SAAY,eAAA,EACrCP,EAAA,IAACQ,EAAA,CACG,KAAK,WACL,KAAK,cACL,GAAG,cACH,MAAOpB,EAAe,YACtB,SAAUQ,EACV,SAAQ,EAAA,CAAA,CACZ,EACJ,SACCU,EACG,CAAA,SAAA,CAACN,EAAA,IAAAO,EAAA,CAAM,IAAI,kBAAkB,SAE7B,mBAAA,EACAP,EAAA,IAACQ,EAAA,CACG,KAAK,WACL,KAAK,kBACL,GAAG,kBACH,MAAOpB,EAAe,gBACtB,SAAUQ,EACV,SAAQ,EAAA,CAAA,CACZ,EACJ,QACCa,EAAO,CAAA,KAAK,SAAS,MAAM,UAAU,SAEtC,iBAAA,CAAA,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,CACJ,CAAA,EACJ,CAER"}