import{b,l as w,d as F,h as k,u as C,j as e,H as L,E as y,M as I,A as N,L as l}from"./index-CdmDVAN5.js";import{C as h,a as p}from"./CardBody-DZROwnLA.js";import{L as U,a as g}from"./ListGroupItem-Dl_Go0yB.js";import{F as f,a as q}from"./folder-up-Dy4vcjLW.js";const E=(r,s,t)=>{const c=["markdownDocument",{documentGroup:r,path:s}],o=`${F}/api/markdown-documents?documentGroup=${encodeURIComponent(r)}&path=${encodeURIComponent(s)}`,n=b();return w({queryKey:c,queryFn:async()=>{const a=await n(o);return k(a)},...t})},M=(r,s,t)=>{const c=["markdownDocumentsByDirectory",{documentGroup:r,directoryPath:s}],o=`${F}/api/markdown-documents?documentGroup=${encodeURIComponent(r)}&path=${encodeURIComponent(s)}`,n=b();return w({queryKey:c,queryFn:async()=>{const a=await n(o);return k(a)},...t})},W=({documentGroup:r,documentPath:s,basePath:t})=>{const{isSysAdmin:c}=C(),o=s.lastIndexOf("/"),n=o>=0?s.substring(0,o+1):"",{data:i,error:a,isLoading:D}=E(r,s,{enabled:!s.endsWith("/")&&s!==""}),{data:m,error:u,isLoading:$}=M(r,n);if(D||$)return e.jsx(L,{});if(a&&!s.endsWith("/")&&s!=="")return e.jsx(y,{error:a,title:"Unable to fetch document"});if(u)return e.jsx(y,{error:u,title:"Unable to fetch document list"});const x=s.endsWith("/")||s==="";return e.jsxs("div",{className:"markdown-viewer",children:[!x&&i?e.jsx(h,{className:"mb-4",children:e.jsx(p,{children:e.jsx("div",{className:"markdown-content",children:e.jsx(I,{content:i.content})})})}):e.jsxs(N,{color:"info",children:["Browsing directory: ",n||"/"]}),e.jsx(h,{children:e.jsxs(p,{children:[e.jsx("h3",{children:x?"Contents":"Related Documents"}),e.jsxs(U,{children:[n&&e.jsxs(g,{tag:l,to:`${t}${n.substring(0,n.length-1).substring(0,n.substring(0,n.length-1).lastIndexOf("/")+1)}`,children:[e.jsx(f,{className:"me-2",size:18}),"../ (Parent Directory)"]}),m&&m.map(d=>{const R=d.endsWith("/"),j=d.split("/").filter(Boolean).pop()||d;return e.jsx(g,{tag:l,to:`${t}${d}`,children:R?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"me-2",size:18}),j]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"me-2",size:18}),j]})},d)})]})]})}),i&&c()&&e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsx(l,{className:"btn btn-primary",to:`/sysadmin/documents/edit/${i.id}`,children:"Edit"})})]})};export{W as R};
//# sourceMappingURL=RenderMarkdownDocument-C4LAoSRg.js.map
