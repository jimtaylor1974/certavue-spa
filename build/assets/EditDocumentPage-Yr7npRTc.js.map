{"version":3,"file":"EditDocumentPage-Yr7npRTc.js","sources":["../../node_modules/react-markdown-editor-lite/node_modules/uuid/dist/esm-browser/rng.js","../../node_modules/react-markdown-editor-lite/node_modules/uuid/dist/esm-browser/regex.js","../../node_modules/react-markdown-editor-lite/node_modules/uuid/dist/esm-browser/validate.js","../../node_modules/react-markdown-editor-lite/node_modules/uuid/dist/esm-browser/stringify.js","../../node_modules/react-markdown-editor-lite/node_modules/uuid/dist/esm-browser/v4.js","../../node_modules/react-markdown-editor-lite/esm/components/Icon/index.js","../../node_modules/react-markdown-editor-lite/esm/components/NavigationBar/index.js","../../node_modules/react-markdown-editor-lite/esm/components/ToolBar/index.js","../../node_modules/eventemitter3/index.js","../../node_modules/react-markdown-editor-lite/esm/share/emitter.js","../../node_modules/react-markdown-editor-lite/esm/i18n/lang/en-US.js","../../node_modules/react-markdown-editor-lite/esm/i18n/lang/zh-CN.js","../../node_modules/react-markdown-editor-lite/esm/i18n/index.js","../../node_modules/react-markdown-editor-lite/esm/plugins/Plugin.js","../../node_modules/react-markdown-editor-lite/esm/plugins/divider/index.js","../../node_modules/react-markdown-editor-lite/esm/share/var.js","../../node_modules/react-markdown-editor-lite/esm/utils/tool.js","../../node_modules/react-markdown-editor-lite/esm/utils/decorate.js","../../node_modules/react-markdown-editor-lite/esm/utils/mergeConfig.js","../../node_modules/react-markdown-editor-lite/esm/utils/uploadPlaceholder.js","../../node_modules/react-markdown-editor-lite/esm/editor/defaultConfig.js","../../node_modules/react-markdown-editor-lite/esm/editor/preview.js","../../node_modules/react-markdown-editor-lite/esm/editor/index.js","../../node_modules/react-markdown-editor-lite/esm/plugins/block/code-block.js","../../node_modules/react-markdown-editor-lite/esm/plugins/block/code-inline.js","../../node_modules/react-markdown-editor-lite/esm/plugins/block/quote.js","../../node_modules/react-markdown-editor-lite/esm/plugins/block/wrap.js","../../node_modules/react-markdown-editor-lite/esm/plugins/clear.js","../../node_modules/react-markdown-editor-lite/esm/plugins/font/bold.js","../../node_modules/react-markdown-editor-lite/esm/plugins/font/italic.js","../../node_modules/react-markdown-editor-lite/esm/plugins/font/strikethrough.js","../../node_modules/react-markdown-editor-lite/esm/plugins/font/underline.js","../../node_modules/react-markdown-editor-lite/esm/plugins/fullScreen.js","../../node_modules/react-markdown-editor-lite/esm/components/DropList/index.js","../../node_modules/react-markdown-editor-lite/esm/plugins/header/HeaderList.js","../../node_modules/react-markdown-editor-lite/esm/plugins/header/index.js","../../node_modules/react-markdown-editor-lite/esm/plugins/Image/inputFile.js","../../node_modules/react-markdown-editor-lite/esm/plugins/Image/index.js","../../node_modules/react-markdown-editor-lite/esm/plugins/link.js","../../node_modules/react-markdown-editor-lite/esm/plugins/list/ordered.js","../../node_modules/react-markdown-editor-lite/esm/plugins/list/unordered.js","../../node_modules/react-markdown-editor-lite/esm/plugins/logger/logger.js","../../node_modules/react-markdown-editor-lite/esm/plugins/logger/index.js","../../node_modules/react-markdown-editor-lite/esm/plugins/modeToggle.js","../../node_modules/react-markdown-editor-lite/esm/plugins/table/table.js","../../node_modules/react-markdown-editor-lite/esm/plugins/table/index.js","../../node_modules/react-markdown-editor-lite/esm/index.js","../../src/api/documents/useCreateMarkdownDocument.ts","../../src/api/documents/useGetMarkdownDocumentById.ts","../../src/api/documents/useUpdateMarkdownDocument.ts","../../src/lib/isValidUrlCharacter.ts","../../src/components/documents/validateDocumentPath.ts","../../src/components/documents/EditDocumentPage.tsx"],"sourcesContent":["// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","// Icon\nimport * as React from 'react';\nexport default function Icon(props) {\n  return /*#__PURE__*/React.createElement(\"i\", {\n    className: \"rmel-iconfont rmel-icon-\" + props.type\n  });\n}","import * as React from 'react';\nexport default function NavigationBar(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rc-md-navigation \" + (props.visible ? 'visible' : 'in-visible')\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"navigation-nav left\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"button-wrap\"\n  }, props.left)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"navigation-nav right\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"button-wrap\"\n  }, props.right)));\n}","import * as React from 'react';\nexport default function ToolBar(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tool-bar\",\n    style: props.style\n  }, props.children);\n}","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","import _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport { EventEmitter } from 'eventemitter3';\n\nvar Emitter = /*#__PURE__*/function (_EventEmitter) {\n  _inheritsLoose(Emitter, _EventEmitter);\n\n  function Emitter() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _EventEmitter.call.apply(_EventEmitter, [this].concat(args)) || this;\n    _this.EVENT_CHANGE = 'a1';\n    _this.EVENT_FULL_SCREEN = 'a2';\n    _this.EVENT_VIEW_CHANGE = 'a3';\n    _this.EVENT_KEY_DOWN = 'a4';\n    _this.EVENT_EDITOR_KEY_DOWN = 'a5';\n    _this.EVENT_FOCUS = 'a5';\n    _this.EVENT_BLUR = 'a6';\n    _this.EVENT_SCROLL = 'a7';\n    _this.EVENT_LANG_CHANGE = 'b1';\n    return _this;\n  }\n\n  return Emitter;\n}(EventEmitter);\n\nvar globalEmitter = new Emitter();\nexport { globalEmitter };\nexport default Emitter;","export default {\n  clearTip: 'Are you sure you want to clear all contents?',\n  btnHeader: 'Header',\n  btnClear: 'Clear',\n  btnBold: 'Bold',\n  btnItalic: 'Italic',\n  btnUnderline: 'Underline',\n  btnStrikethrough: 'Strikethrough',\n  btnUnordered: 'Unordered list',\n  btnOrdered: 'Ordered list',\n  btnQuote: 'Quote',\n  btnLineBreak: 'Line break',\n  btnInlineCode: 'Inline code',\n  btnCode: 'Code',\n  btnTable: 'Table',\n  btnImage: 'Image',\n  btnLink: 'Link',\n  btnUndo: 'Undo',\n  btnRedo: 'Redo',\n  btnFullScreen: 'Full screen',\n  btnExitFullScreen: 'Exit full screen',\n  btnModeEditor: 'Only display editor',\n  btnModePreview: 'Only display preview',\n  btnModeAll: 'Display both editor and preview',\n  selectTabMap: 'Actual input when typing a Tab key',\n  tab: 'Tab',\n  spaces: 'Spaces'\n};","export default {\n  clearTip: '您确定要清空所有内容吗？',\n  btnHeader: '标题',\n  btnClear: '清空',\n  btnBold: '加粗',\n  btnItalic: '斜体',\n  btnUnderline: '下划线',\n  btnStrikethrough: '删除线',\n  btnUnordered: '无序列表',\n  btnOrdered: '有序列表',\n  btnQuote: '引用',\n  btnLineBreak: '换行',\n  btnInlineCode: '行内代码',\n  btnCode: '代码块',\n  btnTable: '表格',\n  btnImage: '图片',\n  btnLink: '链接',\n  btnUndo: '撤销',\n  btnRedo: '重做',\n  btnFullScreen: '全屏',\n  btnExitFullScreen: '退出全屏',\n  btnModeEditor: '仅显示编辑器',\n  btnModePreview: '仅显示预览',\n  btnModeAll: '显示编辑器与预览',\n  selectTabMap: '按下 Tab 键时实际的输入',\n  tab: '制表符',\n  spaces: '空格'\n};","import { globalEmitter } from '../share/emitter';\nimport enUS from './lang/en-US';\nimport zhCN from './lang/zh-CN';\n\nvar I18n = /*#__PURE__*/function () {\n  function I18n() {\n    this.langs = {\n      enUS: enUS,\n      zhCN: zhCN\n    };\n    this.current = 'enUS';\n    this.setUp();\n  }\n\n  var _proto = I18n.prototype;\n\n  _proto.setUp = function setUp() {\n    if (typeof window === 'undefined') {\n      // 不在浏览器环境中，取消检测\n      return;\n    }\n\n    var locale = 'enUS'; // 检测语言\n\n    if (navigator.language) {\n      var it = navigator.language.split('-');\n      locale = it[0];\n\n      if (it.length !== 1) {\n        locale += it[it.length - 1].toUpperCase();\n      }\n    } // IE10及更低版本使用browserLanguage\n    // @ts-ignore\n\n\n    if (navigator.browserLanguage) {\n      // @ts-ignore\n      var _it = navigator.browserLanguage.split('-');\n\n      locale = _it[0];\n\n      if (_it[1]) {\n        locale += _it[1].toUpperCase();\n      }\n    }\n\n    if (this.current !== locale && this.isAvailable(locale)) {\n      this.current = locale;\n      globalEmitter.emit(globalEmitter.EVENT_LANG_CHANGE, this, locale, this.langs[locale]);\n    }\n  };\n\n  _proto.isAvailable = function isAvailable(langName) {\n    return typeof this.langs[langName] !== 'undefined';\n  };\n\n  _proto.add = function add(langName, lang) {\n    this.langs[langName] = lang;\n  };\n\n  _proto.setCurrent = function setCurrent(langName) {\n    if (!this.isAvailable(langName)) {\n      throw new Error(\"Language \" + langName + \" is not exists\");\n    }\n\n    if (this.current !== langName) {\n      this.current = langName;\n      globalEmitter.emit(globalEmitter.EVENT_LANG_CHANGE, this, langName, this.langs[langName]);\n    }\n  };\n\n  _proto.get = function get(key, placeholders) {\n    var str = this.langs[this.current][key] || '';\n\n    if (placeholders) {\n      Object.keys(placeholders).forEach(function (k) {\n        str = str.replace(new RegExp(\"\\\\{\" + k + \"\\\\}\", 'g'), placeholders[k]);\n      });\n    }\n\n    return str;\n  };\n\n  _proto.getCurrent = function getCurrent() {\n    return this.current;\n  };\n\n  return I18n;\n}();\n\nvar i18n = new I18n();\nexport default i18n;","import _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nexport var PluginComponent = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(PluginComponent, _React$Component);\n\n  function PluginComponent() {\n    return _React$Component.apply(this, arguments) || this;\n  }\n\n  var _proto = PluginComponent.prototype;\n\n  _proto.getConfig = function getConfig(key, defaultValue) {\n    return typeof this.props.config[key] !== 'undefined' && this.props.config[key] !== null ? this.props.config[key] : defaultValue;\n  };\n\n  _createClass(PluginComponent, [{\n    key: \"editor\",\n    get: function get() {\n      return this.props.editor;\n    }\n  }, {\n    key: \"editorConfig\",\n    get: function get() {\n      return this.props.editorConfig;\n    }\n  }]);\n\n  return PluginComponent;\n}(React.Component);\nPluginComponent.pluginName = '';\nPluginComponent.align = 'left';\nPluginComponent.defaultConfig = {};","import _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport { PluginComponent } from '../Plugin';\n\nvar Divider = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(Divider, _PluginComponent);\n\n  function Divider() {\n    return _PluginComponent.apply(this, arguments) || this;\n  }\n\n  var _proto = Divider.prototype;\n\n  _proto.render = function render() {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"rc-md-divider\"\n    });\n  };\n\n  return Divider;\n}(PluginComponent);\n\nDivider.pluginName = 'divider';\nexport { Divider as default };","export var initialSelection = {\n  start: 0,\n  end: 0,\n  text: ''\n};","function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport function deepClone(obj) {\n  if (!obj || typeof obj !== 'object') {\n    return obj;\n  }\n\n  var objArray = Array.isArray(obj) ? [] : {};\n\n  if (obj && typeof obj === 'object') {\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        // 如果obj的属性是对象，递归操作\n        if (obj[key] && typeof obj[key] === 'object') {\n          objArray[key] = deepClone(obj[key]);\n        } else {\n          objArray[key] = obj[key];\n        }\n      }\n    }\n  }\n\n  return objArray;\n}\nexport function isEmpty(obj) {\n  // 判断字符是否为空的方法\n  return typeof obj === 'undefined' || obj === null || obj === '';\n}\nexport function isPromise(obj) {\n  return obj && (obj instanceof Promise || (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function');\n}\nexport function repeat(str, num) {\n  var result = '';\n  var n = num;\n\n  while (n--) {\n    result += str;\n  }\n\n  return result;\n}\nexport function isKeyMatch(event, cond) {\n  var withKey = cond.withKey,\n      keyCode = cond.keyCode,\n      key = cond.key,\n      aliasCommand = cond.aliasCommand;\n  var e = {\n    ctrlKey: event.ctrlKey,\n    metaKey: event.metaKey,\n    altKey: event.altKey,\n    shiftKey: event.shiftKey,\n    keyCode: event.keyCode,\n    key: event.key\n  };\n\n  if (aliasCommand) {\n    e.ctrlKey = e.ctrlKey || e.metaKey;\n  }\n\n  if (withKey && withKey.length > 0) {\n    for (var _iterator = _createForOfIteratorHelperLoose(withKey), _step; !(_step = _iterator()).done;) {\n      var it = _step.value;\n\n      if (typeof e[it] !== 'undefined' && !e[it]) {\n        return false;\n      }\n    }\n  } else {\n    if (e.metaKey || e.ctrlKey || e.shiftKey || e.altKey) {\n      return false;\n    }\n  }\n\n  if (e.key) {\n    return e.key === key;\n  } else {\n    return e.keyCode === keyCode;\n  }\n}\nexport function getLineAndCol(text, pos) {\n  var lines = text.split('\\n');\n  var beforeLines = text.substr(0, pos).split('\\n');\n  var line = beforeLines.length;\n  var col = beforeLines[beforeLines.length - 1].length;\n  var curLine = lines[beforeLines.length - 1];\n  var prevLine = beforeLines.length > 1 ? beforeLines[beforeLines.length - 2] : null;\n  var nextLine = lines.length > beforeLines.length ? lines[beforeLines.length] : null;\n  return {\n    line: line,\n    col: col,\n    beforeText: text.substr(0, pos),\n    afterText: text.substr(pos),\n    curLine: curLine,\n    prevLine: prevLine,\n    nextLine: nextLine\n  };\n}","import { repeat } from './tool';\n// 最简单的Decorator，即在现有文字的基础上加上前缀、后缀即可\nvar SIMPLE_DECORATOR = {\n  bold: ['**', '**'],\n  italic: ['*', '*'],\n  underline: ['++', '++'],\n  strikethrough: ['~~', '~~'],\n  quote: ['\\n> ', '\\n'],\n  inlinecode: ['`', '`'],\n  code: ['\\n```\\n', '\\n```\\n']\n}; // 插入H1-H6\n\nfor (var i = 1; i <= 6; i++) {\n  SIMPLE_DECORATOR[\"h\" + i] = [\"\\n\" + repeat('#', i) + \" \", '\\n'];\n}\n\nfunction decorateTableText(option) {\n  var _option$row = option.row,\n      row = _option$row === void 0 ? 2 : _option$row,\n      _option$col = option.col,\n      col = _option$col === void 0 ? 2 : _option$col;\n  var rowHeader = ['|'];\n  var rowData = ['|'];\n  var rowDivision = ['|'];\n  var colStr = '';\n\n  for (var _i = 1; _i <= col; _i++) {\n    rowHeader.push(' Head |');\n    rowDivision.push(' --- |');\n    rowData.push(' Data |');\n  }\n\n  for (var j = 1; j <= row; j++) {\n    colStr += '\\n' + rowData.join('');\n  }\n\n  return rowHeader.join('') + \"\\n\" + rowDivision.join('') + colStr;\n}\n\nfunction decorateList(type, target) {\n  var text = target;\n\n  if (text.substr(0, 1) !== '\\n') {\n    text = '\\n' + text;\n  }\n\n  if (type === 'unordered') {\n    return text.length > 1 ? text.replace(/\\n/g, '\\n* ').trim() : '* ';\n  } else {\n    var count = 1;\n\n    if (text.length > 1) {\n      return text.replace(/\\n/g, function () {\n        return \"\\n\" + count++ + \". \";\n      }).trim();\n    } else {\n      return '1. ';\n    }\n  }\n}\n\nfunction createTextDecorated(text, newBlock) {\n  return {\n    text: text,\n    newBlock: newBlock,\n    selection: {\n      start: text.length,\n      end: text.length\n    }\n  };\n}\n/**\n * 获取装饰后的Markdown文本\n * @param target 原文字\n * @param type 装饰类型\n * @param option 附加参数\n * @returns {Decorated}\n */\n\n\nfunction getDecorated(target, type, option) {\n  if (typeof SIMPLE_DECORATOR[type] !== 'undefined') {\n    return {\n      text: \"\" + SIMPLE_DECORATOR[type][0] + target + SIMPLE_DECORATOR[type][1],\n      selection: {\n        start: SIMPLE_DECORATOR[type][0].length,\n        end: SIMPLE_DECORATOR[type][0].length + target.length\n      }\n    };\n  }\n\n  switch (type) {\n    case 'tab':\n      var inputValue = option.tabMapValue === 1 ? '\\t' : ' '.repeat(option.tabMapValue);\n      var newSelectedText = inputValue + target.replace(/\\n/g, \"\\n\" + inputValue);\n      var lineBreakCount = target.includes('\\n') ? target.match(/\\n/g).length : 0;\n      return {\n        text: newSelectedText,\n        selection: {\n          start: option.tabMapValue,\n          end: option.tabMapValue * (lineBreakCount + 1) + target.length\n        }\n      };\n\n    case 'unordered':\n      return createTextDecorated(decorateList('unordered', target), true);\n\n    case 'order':\n      return createTextDecorated(decorateList('order', target), true);\n\n    case 'hr':\n      return createTextDecorated('---', true);\n\n    case 'table':\n      return {\n        text: decorateTableText(option),\n        newBlock: true\n      };\n\n    case 'image':\n      return {\n        text: \"![\" + (target || option.target) + \"](\" + (option.imageUrl || '') + \")\",\n        selection: {\n          start: 2,\n          end: target.length + 2\n        }\n      };\n\n    case 'link':\n      return {\n        text: \"[\" + target + \"](\" + (option.linkUrl || '') + \")\",\n        selection: {\n          start: 1,\n          end: target.length + 1\n        }\n      };\n  }\n\n  return {\n    text: target,\n    selection: {\n      start: 0,\n      end: target.length\n    }\n  };\n}\n\nexport default getDecorated;","import _extends from \"@babel/runtime/helpers/extends\";\n\nfunction mergeObject(obj1, obj2) {\n  var result = {};\n  Object.keys(obj1).forEach(function (k) {\n    if (typeof obj2[k] === 'undefined') {\n      result[k] = obj1[k];\n      return;\n    }\n\n    if (typeof obj2[k] === 'object') {\n      if (Array.isArray(obj2[k])) {\n        result[k] = [].concat(obj2[k]);\n      } else {\n        result[k] = mergeObject(obj1[k], obj2[k]);\n      }\n\n      return;\n    }\n\n    result[k] = obj2[k];\n  });\n  return result;\n}\n\nexport default function (defaultConfig) {\n  var res = _extends({}, defaultConfig);\n\n  for (var _len = arguments.length, configs = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    configs[_key - 1] = arguments[_key];\n  }\n\n  configs.forEach(function (conf) {\n    // only object\n    if (typeof conf !== 'object') {\n      return;\n    }\n\n    res = mergeObject(res, conf);\n  });\n  return res;\n}","import { v4 as uuid } from 'uuid';\nimport getDecorated from './decorate';\nimport { isPromise } from './tool';\n\nfunction getUploadPlaceholder(file, onImageUpload) {\n  var placeholder = getDecorated('', 'image', {\n    target: \"Uploading_\" + uuid(),\n    imageUrl: ''\n  }).text;\n  var uploaded = new Promise(function (resolve) {\n    var isCallback = true;\n\n    var handleUploaded = function handleUploaded(url) {\n      if (isCallback) {\n        console.warn('Deprecated: onImageUpload should return a Promise, callback will be removed in future');\n      }\n\n      resolve(getDecorated('', 'image', {\n        target: file.name,\n        imageUrl: url\n      }).text);\n    }; // 兼容回调和Promise\n\n\n    var upload = onImageUpload(file, handleUploaded);\n\n    if (isPromise(upload)) {\n      isCallback = false;\n      upload.then(handleUploaded);\n    }\n  });\n  return {\n    placeholder: placeholder,\n    uploaded: uploaded\n  };\n}\n\nexport default getUploadPlaceholder;","var defaultConfig = {\n  theme: 'default',\n  view: {\n    menu: true,\n    md: true,\n    html: true\n  },\n  canView: {\n    menu: true,\n    md: true,\n    html: true,\n    both: true,\n    fullScreen: true,\n    hideMenu: true\n  },\n  htmlClass: '',\n  markdownClass: '',\n  syncScrollMode: ['rightFollowLeft', 'leftFollowRight'],\n  imageUrl: '',\n  imageAccept: '',\n  linkUrl: '',\n  loggerMaxSize: 100,\n  loggerInterval: 600,\n  table: {\n    maxRow: 4,\n    maxCol: 6\n  },\n  allowPasteImage: true,\n  onImageUpload: undefined,\n  onCustomImageUpload: undefined,\n  shortcuts: true,\n  onChangeTrigger: 'both'\n};\nexport default defaultConfig;","import _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nexport var Preview = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Preview, _React$Component);\n\n  function Preview(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.el = /*#__PURE__*/React.createRef();\n    return _this;\n  }\n\n  var _proto = Preview.prototype;\n\n  _proto.getElement = function getElement() {\n    return this.el.current;\n  };\n\n  _proto.getHeight = function getHeight() {\n    return this.el.current ? this.el.current.offsetHeight : 0;\n  };\n\n  return Preview;\n}(React.Component);\nexport var HtmlRender = /*#__PURE__*/function (_Preview) {\n  _inheritsLoose(HtmlRender, _Preview);\n\n  function HtmlRender() {\n    return _Preview.apply(this, arguments) || this;\n  }\n\n  var _proto2 = HtmlRender.prototype;\n\n  _proto2.getHtml = function getHtml() {\n    if (typeof this.props.html === 'string') {\n      return this.props.html;\n    }\n\n    if (this.el.current) {\n      return this.el.current.innerHTML;\n    }\n\n    return '';\n  };\n\n  _proto2.render = function render() {\n    return typeof this.props.html === 'string' ? /*#__PURE__*/React.createElement('div', {\n      ref: this.el,\n      dangerouslySetInnerHTML: {\n        __html: this.props.html\n      },\n      className: this.props.className || 'custom-html-style'\n    }) : /*#__PURE__*/React.createElement('div', {\n      ref: this.el,\n      className: this.props.className || 'custom-html-style'\n    }, this.props.html);\n  };\n\n  return HtmlRender;\n}(Preview);\nexport default HtmlRender;","import _extends from \"@babel/runtime/helpers/extends\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport * as React from 'react';\nimport { v4 as uuid } from 'uuid';\nimport Icon from '../components/Icon';\nimport NavigationBar from '../components/NavigationBar';\nimport ToolBar from '../components/ToolBar';\nimport i18n from '../i18n';\nimport DividerPlugin from '../plugins/divider';\nimport Emitter, { globalEmitter } from '../share/emitter';\nimport { initialSelection } from '../share/var';\nimport getDecorated from '../utils/decorate';\nimport mergeConfig from '../utils/mergeConfig';\nimport { getLineAndCol, isKeyMatch, isPromise } from '../utils/tool';\nimport getUploadPlaceholder from '../utils/uploadPlaceholder';\nimport defaultConfig from './defaultConfig';\nimport { HtmlRender } from './preview';\n\nvar Editor = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Editor, _React$Component);\n\n  /**\n   * Register plugin\n   * @param {any} comp Plugin component\n   * @param {any} config Other configs\n   */\n  Editor.use = function use(comp, config) {\n    if (config === void 0) {\n      config = {};\n    }\n\n    // Check for duplicate plugins\n    for (var i = 0; i < Editor.plugins.length; i++) {\n      if (Editor.plugins[i].comp === comp) {\n        Editor.plugins.splice(i, 1, {\n          comp: comp,\n          config: config\n        });\n        return;\n      }\n    }\n\n    Editor.plugins.push({\n      comp: comp,\n      config: config\n    });\n  }\n  /**\n   * Unregister plugin\n   * @param {any} comp Plugin component\n   */\n  ;\n\n  Editor.unuse = function unuse(comp) {\n    for (var i = 0; i < Editor.plugins.length; i++) {\n      if (Editor.plugins[i].comp === comp) {\n        Editor.plugins.splice(i, 1);\n        return;\n      }\n    }\n  }\n  /**\n   * Unregister all plugins\n   * @param {any} comp Plugin component\n   */\n  ;\n\n  Editor.unuseAll = function unuseAll() {\n    Editor.plugins = [];\n  }\n  /**\n   * Locales\n   */\n  ;\n\n  function Editor(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.nodeMdText = /*#__PURE__*/React.createRef();\n    _this.nodeMdPreview = /*#__PURE__*/React.createRef();\n    _this.nodeMdPreviewWrapper = /*#__PURE__*/React.createRef();\n    _this.hasContentChanged = true;\n    _this.composing = false;\n    _this.pluginApis = new Map();\n    _this.scrollScale = 1;\n    _this.isSyncingScroll = false;\n    _this.shouldSyncScroll = 'md';\n    _this.keyboardListeners = [];\n    _this.emitter = new Emitter();\n    _this.config = mergeConfig(defaultConfig, _this.props.config, _this.props);\n    _this.state = {\n      text: (_this.props.value || _this.props.defaultValue || '').replace(/↵/g, '\\n'),\n      html: '',\n      view: _this.config.view || defaultConfig.view,\n      fullScreen: false,\n      plugins: _this.getPlugins()\n    };\n\n    if (_this.config.canView && !_this.config.canView.menu) {\n      _this.state.view.menu = false;\n    }\n\n    _this.nodeMdText = /*#__PURE__*/React.createRef();\n    _this.nodeMdPreviewWrapper = /*#__PURE__*/React.createRef();\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.handlePaste = _this.handlePaste.bind(_assertThisInitialized(_this));\n    _this.handleDrop = _this.handleDrop.bind(_assertThisInitialized(_this));\n    _this.handleToggleMenu = _this.handleToggleMenu.bind(_assertThisInitialized(_this));\n    _this.handleKeyDown = _this.handleKeyDown.bind(_assertThisInitialized(_this));\n    _this.handleEditorKeyDown = _this.handleEditorKeyDown.bind(_assertThisInitialized(_this));\n    _this.handleLocaleUpdate = _this.handleLocaleUpdate.bind(_assertThisInitialized(_this));\n    _this.handleFocus = _this.handleFocus.bind(_assertThisInitialized(_this));\n    _this.handleBlur = _this.handleBlur.bind(_assertThisInitialized(_this));\n    _this.handleInputScroll = _this.handleSyncScroll.bind(_assertThisInitialized(_this), 'md');\n    _this.handlePreviewScroll = _this.handleSyncScroll.bind(_assertThisInitialized(_this), 'html');\n    return _this;\n  }\n\n  var _proto = Editor.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var text = this.state.text;\n    this.renderHTML(text);\n    globalEmitter.on(globalEmitter.EVENT_LANG_CHANGE, this.handleLocaleUpdate); // init i18n\n\n    i18n.setUp();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    globalEmitter.off(globalEmitter.EVENT_LANG_CHANGE, this.handleLocaleUpdate);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (typeof this.props.value !== 'undefined' && this.props.value !== this.state.text) {\n      var value = this.props.value;\n\n      if (typeof value !== 'string') {\n        value = String(value).toString();\n      }\n\n      value = value.replace(/↵/g, '\\n');\n\n      if (this.state.text !== value) {\n        this.setState({\n          text: value\n        });\n        this.renderHTML(value);\n      }\n    }\n\n    if (prevProps.plugins !== this.props.plugins) {\n      this.setState({\n        plugins: this.getPlugins()\n      });\n    }\n  };\n\n  _proto.isComposing = function isComposing() {\n    return this.composing;\n  };\n\n  _proto.getPlugins = function getPlugins() {\n    var _this2 = this;\n\n    var plugins = [];\n\n    if (this.props.plugins) {\n      // If plugins option is configured, use only specified plugins\n      var addToPlugins = function addToPlugins(name) {\n        if (name === DividerPlugin.pluginName) {\n          plugins.push({\n            comp: DividerPlugin,\n            config: {}\n          });\n          return;\n        }\n\n        for (var _iterator = _createForOfIteratorHelperLoose(Editor.plugins), _step; !(_step = _iterator()).done;) {\n          var it = _step.value;\n\n          if (it.comp.pluginName === name) {\n            plugins.push(it);\n            return;\n          }\n        }\n      };\n\n      for (var _iterator2 = _createForOfIteratorHelperLoose(this.props.plugins), _step2; !(_step2 = _iterator2()).done;) {\n        var name = _step2.value;\n\n        // Special handling of fonts to ensure backward compatibility\n        if (name === 'fonts') {\n          addToPlugins('font-bold');\n          addToPlugins('font-italic');\n          addToPlugins('font-underline');\n          addToPlugins('font-strikethrough');\n          addToPlugins('list-unordered');\n          addToPlugins('list-ordered');\n          addToPlugins('block-quote');\n          addToPlugins('block-wrap');\n          addToPlugins('block-code-inline');\n          addToPlugins('block-code-block');\n        } else {\n          addToPlugins(name);\n        }\n      }\n    } else {\n      // Use all registered plugins\n      plugins = [].concat(Editor.plugins);\n    }\n\n    var result = {};\n    plugins.forEach(function (it) {\n      if (typeof result[it.comp.align] === 'undefined') {\n        result[it.comp.align] = [];\n      }\n\n      var key = it.comp.pluginName === 'divider' ? uuid() : it.comp.pluginName;\n      result[it.comp.align].push( /*#__PURE__*/React.createElement(it.comp, {\n        editor: _this2,\n        editorConfig: _this2.config,\n        config: _extends({}, it.comp.defaultConfig || {}, it.config || {}),\n        key: key\n      }));\n    });\n    return result;\n  } // sync left and right section's scroll\n  ;\n\n  _proto.handleSyncScroll = function handleSyncScroll(type, e) {\n    var _this3 = this;\n\n    // prevent loop\n    if (type !== this.shouldSyncScroll) {\n      return;\n    } // trigger events\n\n\n    if (this.props.onScroll) {\n      this.props.onScroll(e, type);\n    }\n\n    this.emitter.emit(this.emitter.EVENT_SCROLL, e, type); // should sync scroll?\n\n    var _this$config$syncScro = this.config.syncScrollMode,\n        syncScrollMode = _this$config$syncScro === void 0 ? [] : _this$config$syncScro;\n\n    if (!syncScrollMode.includes(type === 'md' ? 'rightFollowLeft' : 'leftFollowRight')) {\n      return;\n    }\n\n    if (this.hasContentChanged && this.nodeMdText.current && this.nodeMdPreviewWrapper.current) {\n      // 计算出左右的比例\n      this.scrollScale = this.nodeMdText.current.scrollHeight / this.nodeMdPreviewWrapper.current.scrollHeight;\n      this.hasContentChanged = false;\n    }\n\n    if (!this.isSyncingScroll) {\n      this.isSyncingScroll = true;\n      requestAnimationFrame(function () {\n        if (_this3.nodeMdText.current && _this3.nodeMdPreviewWrapper.current) {\n          if (type === 'md') {\n            // left to right\n            _this3.nodeMdPreviewWrapper.current.scrollTop = _this3.nodeMdText.current.scrollTop / _this3.scrollScale;\n          } else {\n            // right to left\n            _this3.nodeMdText.current.scrollTop = _this3.nodeMdPreviewWrapper.current.scrollTop * _this3.scrollScale;\n          }\n        }\n\n        _this3.isSyncingScroll = false;\n      });\n    }\n  };\n\n  _proto.renderHTML = function renderHTML(markdownText) {\n    var _this4 = this;\n\n    if (!this.props.renderHTML) {\n      console.error('renderHTML props is required!');\n      return Promise.resolve();\n    }\n\n    var res = this.props.renderHTML(markdownText);\n\n    if (isPromise(res)) {\n      // @ts-ignore\n      return res.then(function (r) {\n        return _this4.setHtml(r);\n      });\n    }\n\n    if (typeof res === 'function') {\n      return this.setHtml(res());\n    }\n\n    return this.setHtml(res);\n  };\n\n  _proto.setHtml = function setHtml(html) {\n    var _this5 = this;\n\n    return new Promise(function (resolve) {\n      _this5.setState({\n        html: html\n      }, resolve);\n    });\n  };\n\n  _proto.handleToggleMenu = function handleToggleMenu() {\n    this.setView({\n      menu: !this.state.view.menu\n    });\n  };\n\n  _proto.handleFocus = function handleFocus(e) {\n    var onFocus = this.props.onFocus;\n\n    if (onFocus) {\n      onFocus(e);\n    }\n\n    this.emitter.emit(this.emitter.EVENT_FOCUS, e);\n  };\n\n  _proto.handleBlur = function handleBlur(e) {\n    var onBlur = this.props.onBlur;\n\n    if (onBlur) {\n      onBlur(e);\n    }\n\n    this.emitter.emit(this.emitter.EVENT_BLUR, e);\n  }\n  /**\n   * Text area change event\n   * @param {React.ChangeEvent} e\n   */\n  ;\n\n  _proto.handleChange = function handleChange(e) {\n    e.persist();\n    var value = e.target.value; // 触发内部事件\n\n    this.setText(value, e);\n  }\n  /**\n   * Listen paste event to support paste images\n   */\n  ;\n\n  _proto.handlePaste = function handlePaste(e) {\n    if (!this.config.allowPasteImage || !this.config.onImageUpload) {\n      return;\n    }\n\n    var event = e.nativeEvent; // @ts-ignore\n\n    var items = (event.clipboardData || window.clipboardData).items;\n\n    if (items) {\n      e.preventDefault();\n      this.uploadWithDataTransfer(items);\n    }\n  } // Drag images to upload\n  ;\n\n  _proto.handleDrop = function handleDrop(e) {\n    if (!this.config.onImageUpload) {\n      return;\n    }\n\n    var event = e.nativeEvent;\n\n    if (!event.dataTransfer) {\n      return;\n    }\n\n    var items = event.dataTransfer.items;\n\n    if (items) {\n      e.preventDefault();\n      this.uploadWithDataTransfer(items);\n    }\n  };\n\n  _proto.handleEditorKeyDown = function handleEditorKeyDown(e) {\n    var _this6 = this;\n\n    var keyCode = e.keyCode,\n        key = e.key,\n        currentTarget = e.currentTarget;\n\n    if ((keyCode === 13 || key === 'Enter') && this.composing === false) {\n      var _text = currentTarget.value;\n      var curPos = currentTarget.selectionStart;\n      var lineInfo = getLineAndCol(_text, curPos);\n\n      var emptyCurrentLine = function emptyCurrentLine() {\n        var newValue = currentTarget.value.substr(0, curPos - lineInfo.curLine.length) + currentTarget.value.substr(curPos);\n\n        _this6.setText(newValue, undefined, {\n          start: curPos - lineInfo.curLine.length,\n          end: curPos - lineInfo.curLine.length\n        });\n\n        e.preventDefault();\n      };\n\n      var addSymbol = function addSymbol(symbol) {\n        _this6.insertText(\"\\n\" + symbol, false, {\n          start: symbol.length + 1,\n          end: symbol.length + 1\n        });\n\n        e.preventDefault();\n      }; // Enter key, check previous line\n\n\n      var isSymbol = lineInfo.curLine.match(/^(\\s*?)\\* /);\n\n      if (isSymbol) {\n        if (/^(\\s*?)\\* $/.test(lineInfo.curLine)) {\n          emptyCurrentLine();\n          return;\n        }\n\n        addSymbol(isSymbol[0]);\n        return;\n      }\n\n      var isOrderList = lineInfo.curLine.match(/^(\\s*?)(\\d+)\\. /);\n\n      if (isOrderList) {\n        if (/^(\\s*?)(\\d+)\\. $/.test(lineInfo.curLine)) {\n          emptyCurrentLine();\n          return;\n        }\n\n        var toInsert = \"\" + isOrderList[1] + (parseInt(isOrderList[2], 10) + 1) + \". \";\n        addSymbol(toInsert);\n        return;\n      }\n    } // 触发默认事件\n\n\n    this.emitter.emit(this.emitter.EVENT_EDITOR_KEY_DOWN, e);\n  } // Handle language change\n  ;\n\n  _proto.handleLocaleUpdate = function handleLocaleUpdate() {\n    this.forceUpdate();\n  }\n  /**\n   * Get elements\n   */\n  ;\n\n  _proto.getMdElement = function getMdElement() {\n    return this.nodeMdText.current;\n  };\n\n  _proto.getHtmlElement = function getHtmlElement() {\n    return this.nodeMdPreviewWrapper.current;\n  }\n  /**\n   * Clear selected\n   */\n  ;\n\n  _proto.clearSelection = function clearSelection() {\n    if (this.nodeMdText.current) {\n      this.nodeMdText.current.setSelectionRange(0, 0, 'none');\n    }\n  }\n  /**\n   * Get selected\n   * @return {Selection}\n   */\n  ;\n\n  _proto.getSelection = function getSelection() {\n    var source = this.nodeMdText.current;\n\n    if (!source) {\n      return _extends({}, initialSelection);\n    }\n\n    var start = source.selectionStart;\n    var end = source.selectionEnd;\n    var text = (source.value || '').slice(start, end);\n    return {\n      start: start,\n      end: end,\n      text: text\n    };\n  }\n  /**\n   * Set selected\n   * @param {Selection} to\n   */\n  ;\n\n  _proto.setSelection = function setSelection(to) {\n    if (this.nodeMdText.current) {\n      this.nodeMdText.current.setSelectionRange(to.start, to.end, 'forward');\n      this.nodeMdText.current.focus();\n    }\n  }\n  /**\n   * Insert markdown text\n   * @param type\n   * @param option\n   */\n  ;\n\n  _proto.insertMarkdown = function insertMarkdown(type, option) {\n    if (option === void 0) {\n      option = {};\n    }\n\n    var curSelection = this.getSelection();\n    var decorateOption = option ? _extends({}, option) : {};\n\n    if (type === 'image') {\n      decorateOption = _extends({}, decorateOption, {\n        target: option.target || curSelection.text || '',\n        imageUrl: option.imageUrl || this.config.imageUrl\n      });\n    }\n\n    if (type === 'link') {\n      decorateOption = _extends({}, decorateOption, {\n        linkUrl: this.config.linkUrl\n      });\n    }\n\n    if (type === 'tab' && curSelection.start !== curSelection.end) {\n      var curLineStart = this.getMdValue().slice(0, curSelection.start).lastIndexOf('\\n') + 1;\n      this.setSelection({\n        start: curLineStart,\n        end: curSelection.end\n      });\n    }\n\n    var decorate = getDecorated(curSelection.text, type, decorateOption);\n    var text = decorate.text;\n    var selection = decorate.selection;\n\n    if (decorate.newBlock) {\n      var startLineInfo = getLineAndCol(this.getMdValue(), curSelection.start);\n      var col = startLineInfo.col,\n          curLine = startLineInfo.curLine;\n\n      if (col > 0 && curLine.length > 0) {\n        text = \"\\n\" + text;\n\n        if (selection) {\n          selection.start++;\n          selection.end++;\n        }\n      }\n\n      var afterText = startLineInfo.afterText;\n\n      if (curSelection.start !== curSelection.end) {\n        afterText = getLineAndCol(this.getMdValue(), curSelection.end).afterText;\n      }\n\n      if (afterText.trim() !== '' && afterText.substr(0, 2) !== '\\n\\n') {\n        if (afterText.substr(0, 1) !== '\\n') {\n          text += '\\n';\n        }\n\n        text += '\\n';\n      }\n    }\n\n    this.insertText(text, true, selection);\n  }\n  /**\n   * Insert a placeholder, and replace it when the Promise resolved\n   * @param placeholder\n   * @param wait\n   */\n  ;\n\n  _proto.insertPlaceholder = function insertPlaceholder(placeholder, wait) {\n    var _this7 = this;\n\n    this.insertText(placeholder, true);\n    wait.then(function (str) {\n      var text = _this7.getMdValue().replace(placeholder, str);\n\n      _this7.setText(text);\n    });\n  }\n  /**\n   * Insert text\n   * @param {string} value The text will be insert\n   * @param {boolean} replaceSelected Replace selected text\n   * @param {Selection} newSelection New selection\n   */\n  ;\n\n  _proto.insertText = function insertText(value, replaceSelected, newSelection) {\n    if (value === void 0) {\n      value = '';\n    }\n\n    if (replaceSelected === void 0) {\n      replaceSelected = false;\n    }\n\n    var text = this.state.text;\n    var selection = this.getSelection();\n    var beforeContent = text.slice(0, selection.start);\n    var afterContent = text.slice(replaceSelected ? selection.end : selection.start, text.length);\n    this.setText(beforeContent + value + afterContent, undefined, newSelection ? {\n      start: newSelection.start + beforeContent.length,\n      end: newSelection.end + beforeContent.length\n    } : {\n      start: selection.start,\n      end: selection.start\n    });\n  }\n  /**\n   * Set text, and trigger onChange event\n   * @param {string} value\n   * @param {any} event\n   */\n  ;\n\n  _proto.setText = function setText(value, event, newSelection) {\n    var _this8 = this;\n\n    if (value === void 0) {\n      value = '';\n    }\n\n    var _this$config$onChange = this.config.onChangeTrigger,\n        onChangeTrigger = _this$config$onChange === void 0 ? 'both' : _this$config$onChange;\n    var text = value.replace(/↵/g, '\\n');\n\n    if (this.state.text === value) {\n      return;\n    }\n\n    this.setState({\n      text: text\n    });\n\n    if (this.props.onChange && (onChangeTrigger === 'both' || onChangeTrigger === 'beforeRender')) {\n      this.props.onChange({\n        text: text,\n        html: this.getHtmlValue()\n      }, event);\n    }\n\n    this.emitter.emit(this.emitter.EVENT_CHANGE, value, event, typeof event === 'undefined');\n\n    if (newSelection) {\n      setTimeout(function () {\n        return _this8.setSelection(newSelection);\n      });\n    }\n\n    if (!this.hasContentChanged) {\n      this.hasContentChanged = true;\n    }\n\n    var rendering = this.renderHTML(text);\n\n    if (onChangeTrigger === 'both' || onChangeTrigger === 'afterRender') {\n      rendering.then(function () {\n        if (_this8.props.onChange) {\n          _this8.props.onChange({\n            text: _this8.state.text,\n            html: _this8.getHtmlValue()\n          }, event);\n        }\n      });\n    }\n  }\n  /**\n   * Get text value\n   * @return {string}\n   */\n  ;\n\n  _proto.getMdValue = function getMdValue() {\n    return this.state.text;\n  }\n  /**\n   * Get rendered html\n   * @returns {string}\n   */\n  ;\n\n  _proto.getHtmlValue = function getHtmlValue() {\n    if (typeof this.state.html === 'string') {\n      return this.state.html;\n    }\n\n    if (this.nodeMdPreview.current) {\n      return this.nodeMdPreview.current.getHtml();\n    }\n\n    return '';\n  }\n  /**\n   * Listen keyboard events\n   */\n  ;\n\n  /**\n   * Listen keyboard events\n   * @param {KeyboardEventListener} data\n   */\n  _proto.onKeyboard = function onKeyboard(data) {\n    var _this9 = this;\n\n    if (Array.isArray(data)) {\n      data.forEach(function (it) {\n        return _this9.onKeyboard(it);\n      });\n      return;\n    }\n\n    if (!this.keyboardListeners.includes(data)) {\n      this.keyboardListeners.push(data);\n    }\n  }\n  /**\n   * Un-listen keyboard events\n   * @param {KeyboardEventListener} data\n   */\n  ;\n\n  _proto.offKeyboard = function offKeyboard(data) {\n    var _this10 = this;\n\n    if (Array.isArray(data)) {\n      data.forEach(function (it) {\n        return _this10.offKeyboard(it);\n      });\n      return;\n    }\n\n    var index = this.keyboardListeners.indexOf(data);\n\n    if (index >= 0) {\n      this.keyboardListeners.splice(index, 1);\n    }\n  };\n\n  _proto.handleKeyDown = function handleKeyDown(e) {\n    // 遍历监听数组，找找有没有被监听\n    for (var _iterator3 = _createForOfIteratorHelperLoose(this.keyboardListeners), _step3; !(_step3 = _iterator3()).done;) {\n      var it = _step3.value;\n\n      if (isKeyMatch(e, it)) {\n        e.preventDefault();\n        it.callback(e);\n        return;\n      }\n    } // 如果没有，触发默认事件\n\n\n    this.emitter.emit(this.emitter.EVENT_KEY_DOWN, e);\n  };\n\n  _proto.getEventType = function getEventType(event) {\n    switch (event) {\n      case 'change':\n        return this.emitter.EVENT_CHANGE;\n\n      case 'fullscreen':\n        return this.emitter.EVENT_FULL_SCREEN;\n\n      case 'viewchange':\n        return this.emitter.EVENT_VIEW_CHANGE;\n\n      case 'keydown':\n        return this.emitter.EVENT_KEY_DOWN;\n\n      case 'editor_keydown':\n        return this.emitter.EVENT_EDITOR_KEY_DOWN;\n\n      case 'blur':\n        return this.emitter.EVENT_BLUR;\n\n      case 'focus':\n        return this.emitter.EVENT_FOCUS;\n\n      case 'scroll':\n        return this.emitter.EVENT_SCROLL;\n    }\n  }\n  /**\n   * Listen events\n   * @param {EditorEvent} event Event type\n   * @param {any} cb Callback\n   */\n  ;\n\n  _proto.on = function on(event, cb) {\n    var eventType = this.getEventType(event);\n\n    if (eventType) {\n      this.emitter.on(eventType, cb);\n    }\n  }\n  /**\n   * Un-listen events\n   * @param {EditorEvent} event Event type\n   * @param {any} cb Callback\n   */\n  ;\n\n  _proto.off = function off(event, cb) {\n    var eventType = this.getEventType(event);\n\n    if (eventType) {\n      this.emitter.off(eventType, cb);\n    }\n  }\n  /**\n   * Set view property\n   * Can show or hide: editor, preview, menu\n   * @param {object} to\n   */\n  ;\n\n  _proto.setView = function setView(to) {\n    var _this11 = this;\n\n    var newView = _extends({}, this.state.view, to);\n\n    this.setState({\n      view: newView\n    }, function () {\n      _this11.emitter.emit(_this11.emitter.EVENT_VIEW_CHANGE, newView);\n    });\n  }\n  /**\n   * Get view property\n   * @return {object}\n   */\n  ;\n\n  _proto.getView = function getView() {\n    return _extends({}, this.state.view);\n  }\n  /**\n   * Enter or exit full screen\n   * @param {boolean} enable\n   */\n  ;\n\n  _proto.fullScreen = function fullScreen(enable) {\n    var _this12 = this;\n\n    if (this.state.fullScreen !== enable) {\n      this.setState({\n        fullScreen: enable\n      }, function () {\n        _this12.emitter.emit(_this12.emitter.EVENT_FULL_SCREEN, enable);\n      });\n    }\n  }\n  /**\n   * Register a plugin API\n   * @param {string} name API name\n   * @param {any} cb callback\n   */\n  ;\n\n  _proto.registerPluginApi = function registerPluginApi(name, cb) {\n    this.pluginApis.set(name, cb);\n  };\n\n  _proto.unregisterPluginApi = function unregisterPluginApi(name) {\n    this.pluginApis.delete(name);\n  }\n  /**\n   * Call a plugin API\n   * @param {string} name API name\n   * @param {any} others arguments\n   * @returns {any}\n   */\n  ;\n\n  _proto.callPluginApi = function callPluginApi(name) {\n    var handler = this.pluginApis.get(name);\n\n    if (!handler) {\n      throw new Error(\"API \" + name + \" not found\");\n    }\n\n    for (var _len = arguments.length, others = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      others[_key - 1] = arguments[_key];\n    }\n\n    return handler.apply(void 0, others);\n  }\n  /**\n   * Is full screen\n   * @return {boolean}\n   */\n  ;\n\n  _proto.isFullScreen = function isFullScreen() {\n    return this.state.fullScreen;\n  };\n\n  _proto.uploadWithDataTransfer = function uploadWithDataTransfer(items) {\n    var _this13 = this;\n\n    var onImageUpload = this.config.onImageUpload;\n\n    if (!onImageUpload) {\n      return;\n    }\n\n    var queue = [];\n    Array.prototype.forEach.call(items, function (it) {\n      if (it.kind === 'file' && it.type.includes('image')) {\n        var file = it.getAsFile();\n\n        if (file) {\n          var placeholder = getUploadPlaceholder(file, onImageUpload);\n          queue.push(Promise.resolve(placeholder.placeholder));\n          placeholder.uploaded.then(function (str) {\n            var text = _this13.getMdValue().replace(placeholder.placeholder, str);\n\n            var offset = str.length - placeholder.placeholder.length; // 计算出替换后的光标位置\n\n            var selection = _this13.getSelection();\n\n            _this13.setText(text, undefined, {\n              start: selection.start + offset,\n              end: selection.start + offset\n            });\n          });\n        }\n      } else if (it.kind === 'string' && it.type === 'text/plain') {\n        queue.push(new Promise(function (resolve) {\n          return it.getAsString(resolve);\n        }));\n      }\n    });\n    Promise.all(queue).then(function (res) {\n      var text = res.join('');\n\n      var selection = _this13.getSelection();\n\n      _this13.insertText(text, true, {\n        start: selection.start === selection.end ? text.length : 0,\n        end: text.length\n      });\n    });\n  };\n\n  _proto.render = function render() {\n    var _this14 = this;\n\n    var _this$state = this.state,\n        view = _this$state.view,\n        fullScreen = _this$state.fullScreen,\n        text = _this$state.text,\n        html = _this$state.html;\n    var _this$props = this.props,\n        id = _this$props.id,\n        _this$props$className = _this$props.className,\n        className = _this$props$className === void 0 ? '' : _this$props$className,\n        style = _this$props.style,\n        _this$props$name = _this$props.name,\n        name = _this$props$name === void 0 ? 'textarea' : _this$props$name,\n        autoFocus = _this$props.autoFocus,\n        placeholder = _this$props.placeholder,\n        readOnly = _this$props.readOnly;\n    var showHideMenu = this.config.canView && this.config.canView.hideMenu && !this.config.canView.menu;\n\n    var getPluginAt = function getPluginAt(at) {\n      return _this14.state.plugins[at] || [];\n    };\n\n    var isShowMenu = !!view.menu;\n    var editorId = id ? id + \"_md\" : undefined;\n    var previewerId = id ? id + \"_html\" : undefined;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: id,\n      className: \"rc-md-editor \" + (fullScreen ? 'full' : '') + \" \" + className,\n      style: style,\n      onKeyDown: this.handleKeyDown,\n      onDrop: this.handleDrop\n    }, /*#__PURE__*/React.createElement(NavigationBar, {\n      visible: isShowMenu,\n      left: getPluginAt('left'),\n      right: getPluginAt('right')\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"editor-container\"\n    }, showHideMenu && /*#__PURE__*/React.createElement(ToolBar, null, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-menu\",\n      title: isShowMenu ? 'hidden menu' : 'show menu',\n      onClick: this.handleToggleMenu\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"expand-\" + (isShowMenu ? 'less' : 'more')\n    }))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"section sec-md \" + (view.md ? 'visible' : 'in-visible')\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      id: editorId,\n      ref: this.nodeMdText,\n      name: name,\n      autoFocus: autoFocus,\n      placeholder: placeholder,\n      readOnly: readOnly,\n      value: text,\n      className: \"section-container input \" + (this.config.markdownClass || ''),\n      wrap: \"hard\",\n      onChange: this.handleChange,\n      onScroll: this.handleInputScroll,\n      onMouseOver: function onMouseOver() {\n        return _this14.shouldSyncScroll = 'md';\n      },\n      onKeyDown: this.handleEditorKeyDown,\n      onCompositionStart: function onCompositionStart() {\n        return _this14.composing = true;\n      },\n      onCompositionEnd: function onCompositionEnd() {\n        return _this14.composing = false;\n      },\n      onPaste: this.handlePaste,\n      onFocus: this.handleFocus,\n      onBlur: this.handleBlur\n    })), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"section sec-html \" + (view.html ? 'visible' : 'in-visible')\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: previewerId,\n      className: \"section-container html-wrap\",\n      ref: this.nodeMdPreviewWrapper,\n      onMouseOver: function onMouseOver() {\n        return _this14.shouldSyncScroll = 'html';\n      },\n      onScroll: this.handlePreviewScroll\n    }, /*#__PURE__*/React.createElement(HtmlRender, {\n      html: html,\n      className: this.config.htmlClass,\n      ref: this.nodeMdPreview\n    })))));\n  };\n\n  return Editor;\n}(React.Component);\n\nEditor.plugins = [];\nEditor.addLocale = i18n.add.bind(i18n);\nEditor.useLocale = i18n.setCurrent.bind(i18n);\nEditor.getLocale = i18n.getCurrent.bind(i18n);\nexport default Editor;","import _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../../components/Icon';\nimport i18n from '../../i18n';\nimport { PluginComponent } from '../Plugin';\n\nvar BlockCodeBlock = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(BlockCodeBlock, _PluginComponent);\n\n  function BlockCodeBlock() {\n    return _PluginComponent.apply(this, arguments) || this;\n  }\n\n  var _proto = BlockCodeBlock.prototype;\n\n  _proto.render = function render() {\n    var _this = this;\n\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-code-block\",\n      title: i18n.get('btnCode'),\n      onClick: function onClick() {\n        return _this.editor.insertMarkdown('code');\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"code-block\"\n    }));\n  };\n\n  return BlockCodeBlock;\n}(PluginComponent);\n\nBlockCodeBlock.pluginName = 'block-code-block';\nexport { BlockCodeBlock as default };","import _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../../components/Icon';\nimport i18n from '../../i18n';\nimport { PluginComponent } from '../Plugin';\n\nvar BlockCodeInline = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(BlockCodeInline, _PluginComponent);\n\n  function BlockCodeInline() {\n    return _PluginComponent.apply(this, arguments) || this;\n  }\n\n  var _proto = BlockCodeInline.prototype;\n\n  _proto.render = function render() {\n    var _this = this;\n\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-code-inline\",\n      title: i18n.get('btnInlineCode'),\n      onClick: function onClick() {\n        return _this.editor.insertMarkdown('inlinecode');\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"code\"\n    }));\n  };\n\n  return BlockCodeInline;\n}(PluginComponent);\n\nBlockCodeInline.pluginName = 'block-code-inline';\nexport { BlockCodeInline as default };","import _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../../components/Icon';\nimport i18n from '../../i18n';\nimport { PluginComponent } from '../Plugin';\n\nvar BlockQuote = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(BlockQuote, _PluginComponent);\n\n  function BlockQuote() {\n    return _PluginComponent.apply(this, arguments) || this;\n  }\n\n  var _proto = BlockQuote.prototype;\n\n  _proto.render = function render() {\n    var _this = this;\n\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-quote\",\n      title: i18n.get('btnQuote'),\n      onClick: function onClick() {\n        return _this.editor.insertMarkdown('quote');\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"quote\"\n    }));\n  };\n\n  return BlockQuote;\n}(PluginComponent);\n\nBlockQuote.pluginName = 'block-quote';\nexport { BlockQuote as default };","import _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../../components/Icon';\nimport i18n from '../../i18n';\nimport { PluginComponent } from '../Plugin';\n\nvar BlockWrap = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(BlockWrap, _PluginComponent);\n\n  function BlockWrap() {\n    return _PluginComponent.apply(this, arguments) || this;\n  }\n\n  var _proto = BlockWrap.prototype;\n\n  _proto.render = function render() {\n    var _this = this;\n\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-wrap\",\n      title: i18n.get('btnLineBreak'),\n      onClick: function onClick() {\n        return _this.editor.insertMarkdown('hr');\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"wrap\"\n    }));\n  };\n\n  return BlockWrap;\n}(PluginComponent);\n\nBlockWrap.pluginName = 'block-wrap';\nexport { BlockWrap as default };","import _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../components/Icon';\nimport i18n from '../i18n';\nimport { PluginComponent } from './Plugin';\n\nvar Clear = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(Clear, _PluginComponent);\n\n  function Clear(props) {\n    var _this;\n\n    _this = _PluginComponent.call(this, props) || this;\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  var _proto = Clear.prototype;\n\n  _proto.handleClick = function handleClick() {\n    if (this.editor.getMdValue() === '') {\n      return;\n    }\n\n    if (window.confirm && typeof window.confirm === 'function') {\n      var result = window.confirm(i18n.get('clearTip'));\n\n      if (result) {\n        this.editor.setText('');\n      }\n    }\n  };\n\n  _proto.render = function render() {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-clear\",\n      title: i18n.get('btnClear'),\n      onClick: this.handleClick\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"delete\"\n    }));\n  };\n\n  return Clear;\n}(PluginComponent);\n\nClear.pluginName = 'clear';\nexport { Clear as default };","import _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../../components/Icon';\nimport i18n from '../../i18n';\nimport { PluginComponent } from '../Plugin';\n\nvar FontBold = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(FontBold, _PluginComponent);\n\n  function FontBold(props) {\n    var _this;\n\n    _this = _PluginComponent.call(this, props) || this;\n    _this.handleKeyboard = {\n      key: 'b',\n      keyCode: 66,\n      aliasCommand: true,\n      withKey: ['ctrlKey'],\n      callback: function callback() {\n        return _this.editor.insertMarkdown('bold');\n      }\n    };\n    return _this;\n  }\n\n  var _proto = FontBold.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (this.editorConfig.shortcuts) {\n      this.editor.onKeyboard(this.handleKeyboard);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.editor.offKeyboard(this.handleKeyboard);\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-bold\",\n      title: i18n.get('btnBold'),\n      onClick: function onClick() {\n        return _this2.editor.insertMarkdown('bold');\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"bold\"\n    }));\n  };\n\n  return FontBold;\n}(PluginComponent);\n\nFontBold.pluginName = 'font-bold';\nexport { FontBold as default };","import _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../../components/Icon';\nimport i18n from '../../i18n';\nimport { PluginComponent } from '../Plugin';\n\nvar FontItalic = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(FontItalic, _PluginComponent);\n\n  function FontItalic(props) {\n    var _this;\n\n    _this = _PluginComponent.call(this, props) || this;\n    _this.handleKeyboard = {\n      key: 'i',\n      keyCode: 73,\n      aliasCommand: true,\n      withKey: ['ctrlKey'],\n      callback: function callback() {\n        return _this.editor.insertMarkdown('italic');\n      }\n    };\n    return _this;\n  }\n\n  var _proto = FontItalic.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (this.editorConfig.shortcuts) {\n      this.editor.onKeyboard(this.handleKeyboard);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.editor.offKeyboard(this.handleKeyboard);\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-italic\",\n      title: i18n.get('btnItalic'),\n      onClick: function onClick() {\n        return _this2.editor.insertMarkdown('italic');\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"italic\"\n    }));\n  };\n\n  return FontItalic;\n}(PluginComponent);\n\nFontItalic.pluginName = 'font-italic';\nexport { FontItalic as default };","import _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../../components/Icon';\nimport i18n from '../../i18n';\nimport { PluginComponent } from '../Plugin';\n\nvar FontStrikethrough = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(FontStrikethrough, _PluginComponent);\n\n  function FontStrikethrough(props) {\n    var _this;\n\n    _this = _PluginComponent.call(this, props) || this;\n    _this.handleKeyboard = {\n      key: 'd',\n      keyCode: 68,\n      aliasCommand: true,\n      withKey: ['ctrlKey'],\n      callback: function callback() {\n        return _this.editor.insertMarkdown('strikethrough');\n      }\n    };\n    return _this;\n  }\n\n  var _proto = FontStrikethrough.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (this.editorConfig.shortcuts) {\n      this.editor.onKeyboard(this.handleKeyboard);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.editor.offKeyboard(this.handleKeyboard);\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-strikethrough\",\n      title: i18n.get('btnStrikethrough'),\n      onClick: function onClick() {\n        return _this2.editor.insertMarkdown('strikethrough');\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"strikethrough\"\n    }));\n  };\n\n  return FontStrikethrough;\n}(PluginComponent);\n\nFontStrikethrough.pluginName = 'font-strikethrough';\nexport { FontStrikethrough as default };","import _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../../components/Icon';\nimport i18n from '../../i18n';\nimport { PluginComponent } from '../Plugin';\n\nvar FontUnderline = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(FontUnderline, _PluginComponent);\n\n  function FontUnderline(props) {\n    var _this;\n\n    _this = _PluginComponent.call(this, props) || this;\n    _this.handleKeyboard = {\n      key: 'u',\n      keyCode: 85,\n      withKey: ['ctrlKey'],\n      callback: function callback() {\n        return _this.editor.insertMarkdown('underline');\n      }\n    };\n    return _this;\n  }\n\n  var _proto = FontUnderline.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (this.editorConfig.shortcuts) {\n      this.editor.onKeyboard(this.handleKeyboard);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.editor.offKeyboard(this.handleKeyboard);\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-underline\",\n      title: i18n.get('btnUnderline'),\n      onClick: function onClick() {\n        return _this2.editor.insertMarkdown('underline');\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"underline\"\n    }));\n  };\n\n  return FontUnderline;\n}(PluginComponent);\n\nFontUnderline.pluginName = 'font-underline';\nexport { FontUnderline as default };","import _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../components/Icon';\nimport i18n from '../i18n';\nimport { PluginComponent } from './Plugin';\n\nvar FullScreen = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(FullScreen, _PluginComponent);\n\n  function FullScreen(props) {\n    var _this;\n\n    _this = _PluginComponent.call(this, props) || this;\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.state = {\n      enable: _this.editor.isFullScreen()\n    };\n    return _this;\n  }\n\n  var _proto = FullScreen.prototype;\n\n  _proto.handleClick = function handleClick() {\n    this.editor.fullScreen(!this.state.enable);\n  };\n\n  _proto.handleChange = function handleChange(enable) {\n    this.setState({\n      enable: enable\n    });\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.editor.on('fullscreen', this.handleChange);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.editor.off('fullscreen', this.handleChange);\n  };\n\n  _proto.render = function render() {\n    if (this.editorConfig.canView && this.editorConfig.canView.fullScreen) {\n      var enable = this.state.enable;\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: \"button button-type-fullscreen\",\n        title: i18n.get(enable ? 'btnExitFullScreen' : 'btnFullScreen'),\n        onClick: this.handleClick\n      }, /*#__PURE__*/React.createElement(Icon, {\n        type: enable ? 'fullscreen-exit' : 'fullscreen'\n      }));\n    }\n\n    return null;\n  };\n\n  return FullScreen;\n}(PluginComponent);\n\nFullScreen.pluginName = 'full-screen';\nFullScreen.align = 'right';\nexport { FullScreen as default };","import _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\n\nvar DropList = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(DropList, _React$Component);\n\n  function DropList(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.handleClose = _this.handleClose.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  var _proto = DropList.prototype;\n\n  _proto.handleClose = function handleClose(e) {\n    e.stopPropagation();\n    var onClose = this.props.onClose;\n\n    if (typeof onClose === 'function') {\n      onClose();\n    }\n  };\n\n  _proto.render = function render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"drop-wrap \" + (this.props.show ? 'show' : 'hidden'),\n      onClick: this.handleClose\n    }, this.props.children);\n  };\n\n  return DropList;\n}(React.Component);\n\nexport default DropList;","import _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\n// HeaderList\nimport * as React from 'react';\n\nvar HeaderList = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(HeaderList, _React$Component);\n\n  function HeaderList() {\n    return _React$Component.apply(this, arguments) || this;\n  }\n\n  var _proto = HeaderList.prototype;\n\n  _proto.handleHeader = function handleHeader(header) {\n    var onSelectHeader = this.props.onSelectHeader;\n\n    if (typeof onSelectHeader === 'function') {\n      onSelectHeader(header);\n    }\n  };\n\n  _proto.render = function render() {\n    return /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"header-list\"\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-item\"\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      onClick: this.handleHeader.bind(this, 'h1')\n    }, \"H1\")), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-item\"\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      onClick: this.handleHeader.bind(this, 'h2')\n    }, \"H2\")), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-item\"\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      onClick: this.handleHeader.bind(this, 'h3')\n    }, \"H3\")), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-item\"\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      onClick: this.handleHeader.bind(this, 'h4')\n    }, \"H4\")), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-item\"\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      onClick: this.handleHeader.bind(this, 'h5')\n    }, \"H5\")), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-item\"\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      onClick: this.handleHeader.bind(this, 'h6')\n    }, \"H6\")));\n  };\n\n  return HeaderList;\n}(React.Component);\n\nexport default HeaderList;","import _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport DropList from '../../components/DropList';\nimport Icon from '../../components/Icon';\nimport i18n from '../../i18n';\nimport { PluginComponent } from '../Plugin';\nimport HeaderList from './HeaderList';\n\nvar Header = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(Header, _PluginComponent);\n\n  function Header(props) {\n    var _this;\n\n    _this = _PluginComponent.call(this, props) || this;\n    _this.show = _this.show.bind(_assertThisInitialized(_this));\n    _this.hide = _this.hide.bind(_assertThisInitialized(_this));\n    _this.state = {\n      show: false\n    };\n    return _this;\n  }\n\n  var _proto = Header.prototype;\n\n  _proto.show = function show() {\n    this.setState({\n      show: true\n    });\n  };\n\n  _proto.hide = function hide() {\n    this.setState({\n      show: false\n    });\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-header\",\n      title: i18n.get('btnHeader'),\n      onMouseEnter: this.show,\n      onMouseLeave: this.hide\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"font-size\"\n    }), /*#__PURE__*/React.createElement(DropList, {\n      show: this.state.show,\n      onClose: this.hide\n    }, /*#__PURE__*/React.createElement(HeaderList, {\n      onSelectHeader: function onSelectHeader(header) {\n        return _this2.editor.insertMarkdown(header);\n      }\n    })));\n  };\n\n  return Header;\n}(PluginComponent);\n\nHeader.pluginName = 'header';\nexport { Header as default };","import _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\n// TableList\nimport * as React from 'react';\n\nvar InputFile = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(InputFile, _React$Component);\n\n  function InputFile(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.timerId = undefined;\n    _this.locked = false;\n    _this.input = /*#__PURE__*/React.createRef();\n    return _this;\n  }\n\n  var _proto = InputFile.prototype;\n\n  _proto.click = function click() {\n    var _this2 = this;\n\n    if (this.locked || !this.input.current) {\n      return;\n    }\n\n    this.locked = true;\n    this.input.current.value = '';\n    this.input.current.click();\n\n    if (this.timerId) {\n      window.clearTimeout(this.timerId);\n    }\n\n    this.timerId = window.setTimeout(function () {\n      _this2.locked = false;\n      window.clearTimeout(_this2.timerId);\n      _this2.timerId = undefined;\n    }, 200);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (this.timerId) {\n      window.clearTimeout(this.timerId);\n    }\n  };\n\n  _proto.render = function render() {\n    return /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      ref: this.input,\n      accept: this.props.accept,\n      style: {\n        position: 'absolute',\n        zIndex: -1,\n        left: 0,\n        top: 0,\n        width: 0,\n        height: 0,\n        opacity: 0\n      },\n      onChange: this.props.onChange\n    });\n  };\n\n  return InputFile;\n}(React.Component);\n\nexport default InputFile;","import _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../../components/Icon';\nimport i18n from '../../i18n';\nimport { PluginComponent } from '../Plugin';\nimport { isPromise } from '../../utils/tool';\nimport getUploadPlaceholder from '../../utils/uploadPlaceholder';\nimport InputFile from './inputFile';\n\nvar Image = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(Image, _PluginComponent);\n\n  function Image(props) {\n    var _this;\n\n    _this = _PluginComponent.call(this, props) || this;\n    _this.inputFile = /*#__PURE__*/React.createRef();\n    _this.onImageChanged = _this.onImageChanged.bind(_assertThisInitialized(_this));\n    _this.handleCustomImageUpload = _this.handleCustomImageUpload.bind(_assertThisInitialized(_this));\n    _this.handleImageUpload = _this.handleImageUpload.bind(_assertThisInitialized(_this));\n    _this.state = {\n      show: false\n    };\n    return _this;\n  }\n\n  var _proto = Image.prototype;\n\n  _proto.handleImageUpload = function handleImageUpload() {\n    var onImageUpload = this.editorConfig.onImageUpload;\n\n    if (typeof onImageUpload === 'function') {\n      if (this.inputFile.current) {\n        this.inputFile.current.click();\n      }\n    } else {\n      this.editor.insertMarkdown('image');\n    }\n  };\n\n  _proto.onImageChanged = function onImageChanged(file) {\n    var onImageUpload = this.editorConfig.onImageUpload;\n\n    if (onImageUpload) {\n      var placeholder = getUploadPlaceholder(file, onImageUpload);\n      this.editor.insertPlaceholder(placeholder.placeholder, placeholder.uploaded);\n    }\n  };\n\n  _proto.handleCustomImageUpload = function handleCustomImageUpload(e) {\n    var _this2 = this;\n\n    var onCustomImageUpload = this.editorConfig.onCustomImageUpload;\n\n    if (onCustomImageUpload) {\n      var res = onCustomImageUpload.call(this, e);\n\n      if (isPromise(res)) {\n        res.then(function (result) {\n          if (result && result.url) {\n            _this2.editor.insertMarkdown('image', {\n              target: result.text,\n              imageUrl: result.url\n            });\n          }\n        });\n      }\n    }\n  };\n\n  _proto.render = function render() {\n    var _this3 = this;\n\n    var isCustom = !!this.editorConfig.onCustomImageUpload;\n    return isCustom ? /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-image\",\n      title: i18n.get('btnImage'),\n      onClick: this.handleCustomImageUpload\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"image\"\n    })) : /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-image\",\n      title: i18n.get('btnImage'),\n      onClick: this.handleImageUpload,\n      style: {\n        position: 'relative'\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"image\"\n    }), /*#__PURE__*/React.createElement(InputFile, {\n      accept: this.editorConfig.imageAccept || '',\n      ref: this.inputFile,\n      onChange: function onChange(e) {\n        e.persist();\n\n        if (e.target.files && e.target.files.length > 0) {\n          _this3.onImageChanged(e.target.files[0]);\n        }\n      }\n    }));\n  };\n\n  return Image;\n}(PluginComponent);\n\nImage.pluginName = 'image';\nexport { Image as default };","import _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../components/Icon';\nimport i18n from '../i18n';\nimport { PluginComponent } from './Plugin';\n\nvar Link = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(Link, _PluginComponent);\n\n  function Link(props) {\n    var _this;\n\n    _this = _PluginComponent.call(this, props) || this;\n    _this.handleKeyboard = {\n      key: 'k',\n      keyCode: 75,\n      aliasCommand: true,\n      withKey: ['ctrlKey'],\n      callback: function callback() {\n        return _this.editor.insertMarkdown('link');\n      }\n    };\n    return _this;\n  }\n\n  var _proto = Link.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (this.editorConfig.shortcuts) {\n      this.editor.onKeyboard(this.handleKeyboard);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.editor.offKeyboard(this.handleKeyboard);\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-link\",\n      title: i18n.get('btnLink'),\n      onClick: function onClick() {\n        return _this2.editor.insertMarkdown('link');\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"link\"\n    }));\n  };\n\n  return Link;\n}(PluginComponent);\n\nLink.pluginName = 'link';\nexport { Link as default };","import _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../../components/Icon';\nimport i18n from '../../i18n';\nimport { PluginComponent } from '../Plugin';\n\nvar ListOrdered = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(ListOrdered, _PluginComponent);\n\n  function ListOrdered(props) {\n    var _this;\n\n    _this = _PluginComponent.call(this, props) || this;\n    _this.handleKeyboard = {\n      key: '7',\n      keyCode: 55,\n      withKey: ['ctrlKey', 'shiftKey'],\n      aliasCommand: true,\n      callback: function callback() {\n        return _this.editor.insertMarkdown('order');\n      }\n    };\n    return _this;\n  }\n\n  var _proto = ListOrdered.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (this.editorConfig.shortcuts) {\n      this.editor.onKeyboard(this.handleKeyboard);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.editor.offKeyboard(this.handleKeyboard);\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-ordered\",\n      title: i18n.get('btnOrdered'),\n      onClick: function onClick() {\n        return _this2.editor.insertMarkdown('order');\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"list-ordered\"\n    }));\n  };\n\n  return ListOrdered;\n}(PluginComponent);\n\nListOrdered.pluginName = 'list-ordered';\nexport { ListOrdered as default };","import _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../../components/Icon';\nimport i18n from '../../i18n';\nimport { PluginComponent } from '../Plugin';\n\nvar ListUnordered = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(ListUnordered, _PluginComponent);\n\n  function ListUnordered(props) {\n    var _this;\n\n    _this = _PluginComponent.call(this, props) || this;\n    _this.handleKeyboard = {\n      key: '8',\n      keyCode: 56,\n      withKey: ['ctrlKey', 'shiftKey'],\n      aliasCommand: true,\n      callback: function callback() {\n        return _this.editor.insertMarkdown('unordered');\n      }\n    };\n    return _this;\n  }\n\n  var _proto = ListUnordered.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (this.editorConfig.shortcuts) {\n      this.editor.onKeyboard(this.handleKeyboard);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.editor.offKeyboard(this.handleKeyboard);\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-unordered\",\n      title: i18n.get('btnUnordered'),\n      onClick: function onClick() {\n        return _this2.editor.insertMarkdown('unordered');\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"list-unordered\"\n    }));\n  };\n\n  return ListUnordered;\n}(PluginComponent);\n\nListUnordered.pluginName = 'list-unordered';\nexport { ListUnordered as default };","/**\n * logger: undo redo\n */\nvar MAX_LOG_SIZE = 100;\n\nvar Logger = /*#__PURE__*/function () {\n  function Logger(props) {\n    if (props === void 0) {\n      props = {};\n    }\n\n    this.record = [];\n    this.recycle = [];\n    this.initValue = '';\n    var _props = props,\n        _props$maxSize = _props.maxSize,\n        maxSize = _props$maxSize === void 0 ? MAX_LOG_SIZE : _props$maxSize;\n    this.maxSize = maxSize;\n  }\n\n  var _proto = Logger.prototype;\n\n  _proto.push = function push(val) {\n    var result = this.record.push(val); // 如果超过了最长限制，把之前的清理掉，避免造成内存浪费\n\n    while (this.record.length > this.maxSize) {\n      this.record.shift();\n    }\n\n    return result;\n  };\n\n  _proto.get = function get() {\n    return this.record;\n  };\n\n  _proto.getLast = function getLast() {\n    var length = this.record.length;\n    return this.record[length - 1];\n  };\n\n  _proto.undo = function undo(skipText) {\n    var current = this.record.pop();\n\n    if (typeof current === 'undefined') {\n      return this.initValue;\n    } // 如果最上面的和现在的不一样，那就不需要再pop一次\n\n\n    if (current !== skipText) {\n      this.recycle.push(current);\n      return current;\n    } // 否则的话，最顶上的一个是当前状态，所以要pop两次才能得到之前的结果\n\n\n    var last = this.record.pop();\n\n    if (typeof last === 'undefined') {\n      // 已经没有更老的记录了，把初始值给出去吧\n      this.recycle.push(current);\n      return this.initValue;\n    } // last 才是真正的上一步\n\n\n    this.recycle.push(current);\n    return last;\n  };\n\n  _proto.redo = function redo() {\n    var history = this.recycle.pop();\n\n    if (typeof history !== 'undefined') {\n      this.push(history);\n      return history;\n    }\n\n    return undefined;\n  };\n\n  _proto.cleanRedo = function cleanRedo() {\n    this.recycle = [];\n  };\n\n  _proto.getUndoCount = function getUndoCount() {\n    return this.undo.length;\n  };\n\n  _proto.getRedoCount = function getRedoCount() {\n    return this.recycle.length;\n  };\n\n  return Logger;\n}();\n\nexport default Logger;","import _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../../components/Icon';\nimport i18n from '../../i18n';\nimport { PluginComponent } from '../Plugin';\nimport LoggerPlugin from './logger';\n\nvar Logger = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(Logger, _PluginComponent);\n\n  function Logger(props) {\n    var _this;\n\n    _this = _PluginComponent.call(this, props) || this;\n    _this.handleKeyboards = [];\n    _this.lastPop = null;\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.handleRedo = _this.handleRedo.bind(_assertThisInitialized(_this));\n    _this.handleUndo = _this.handleUndo.bind(_assertThisInitialized(_this)); // Mac的Redo比较特殊，是Command+Shift+Z，优先处理\n\n    _this.handleKeyboards = [{\n      key: 'y',\n      keyCode: 89,\n      withKey: ['ctrlKey'],\n      callback: _this.handleRedo\n    }, {\n      key: 'z',\n      keyCode: 90,\n      withKey: ['metaKey', 'shiftKey'],\n      callback: _this.handleRedo\n    }, {\n      key: 'z',\n      keyCode: 90,\n      aliasCommand: true,\n      withKey: ['ctrlKey'],\n      callback: _this.handleUndo\n    }];\n    _this.logger = new LoggerPlugin({\n      maxSize: _this.editorConfig.loggerMaxSize\n    }); // 注册API\n\n    _this.editor.registerPluginApi('undo', _this.handleUndo);\n\n    _this.editor.registerPluginApi('redo', _this.handleRedo);\n\n    return _this;\n  }\n\n  var _proto = Logger.prototype;\n\n  _proto.handleUndo = function handleUndo() {\n    var last = this.logger.undo(this.editor.getMdValue());\n\n    if (typeof last !== 'undefined') {\n      this.pause();\n      this.lastPop = last;\n      this.editor.setText(last);\n      this.forceUpdate();\n    }\n  };\n\n  _proto.handleRedo = function handleRedo() {\n    var last = this.logger.redo();\n\n    if (typeof last !== 'undefined') {\n      this.lastPop = last;\n      this.editor.setText(last);\n      this.forceUpdate();\n    }\n  };\n\n  _proto.handleChange = function handleChange(value, e, isNotInput) {\n    var _this2 = this;\n\n    if (this.logger.getLast() === value || this.lastPop !== null && this.lastPop === value) {\n      return;\n    }\n\n    this.logger.cleanRedo();\n\n    if (isNotInput) {\n      // from setText API call, not a input\n      this.logger.push(value);\n      this.lastPop = null;\n      this.forceUpdate();\n      return;\n    }\n\n    if (this.timerId) {\n      window.clearTimeout(this.timerId);\n      this.timerId = 0;\n    }\n\n    this.timerId = window.setTimeout(function () {\n      if (_this2.logger.getLast() !== value) {\n        _this2.logger.push(value);\n\n        _this2.lastPop = null;\n\n        _this2.forceUpdate();\n      }\n\n      window.clearTimeout(_this2.timerId);\n      _this2.timerId = 0;\n    }, this.editorConfig.loggerInterval);\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    var _this3 = this;\n\n    // 监听变化事件\n    this.editor.on('change', this.handleChange); // 监听键盘事件\n\n    this.handleKeyboards.forEach(function (it) {\n      return _this3.editor.onKeyboard(it);\n    }); // 初始化时，把已有值填充进logger\n\n    this.logger.initValue = this.editor.getMdValue();\n    this.forceUpdate();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    var _this4 = this;\n\n    if (this.timerId) {\n      window.clearTimeout(this.timerId);\n    }\n\n    this.editor.off('change', this.handleChange);\n    this.editor.unregisterPluginApi('undo');\n    this.editor.unregisterPluginApi('redo');\n    this.handleKeyboards.forEach(function (it) {\n      return _this4.editor.offKeyboard(it);\n    });\n  };\n\n  _proto.pause = function pause() {\n    if (this.timerId) {\n      window.clearTimeout(this.timerId);\n      this.timerId = undefined;\n    }\n  };\n\n  _proto.render = function render() {\n    var hasUndo = this.logger.getUndoCount() > 1 || this.logger.initValue !== this.editor.getMdValue();\n    var hasRedo = this.logger.getRedoCount() > 0;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-undo \" + (hasUndo ? '' : 'disabled'),\n      title: i18n.get('btnUndo'),\n      onClick: this.handleUndo\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"undo\"\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-redo \" + (hasRedo ? '' : 'disabled'),\n      title: i18n.get('btnRedo'),\n      onClick: this.handleRedo\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"redo\"\n    })));\n  };\n\n  return Logger;\n}(PluginComponent);\n\nLogger.pluginName = 'logger';\nexport { Logger as default };","import _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../components/Icon';\nimport i18n from '../i18n';\nimport { PluginComponent } from './Plugin';\nvar NEXT_ACTION;\n\n(function (NEXT_ACTION) {\n  NEXT_ACTION[NEXT_ACTION[\"SHOW_ALL\"] = 0] = \"SHOW_ALL\";\n  NEXT_ACTION[NEXT_ACTION[\"SHOW_MD\"] = 1] = \"SHOW_MD\";\n  NEXT_ACTION[NEXT_ACTION[\"SHOW_HTML\"] = 2] = \"SHOW_HTML\";\n})(NEXT_ACTION || (NEXT_ACTION = {}));\n\nvar ModeToggle = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(ModeToggle, _PluginComponent);\n\n  function ModeToggle(props) {\n    var _this;\n\n    _this = _PluginComponent.call(this, props) || this;\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.state = {\n      view: _this.editor.getView()\n    };\n    return _this;\n  }\n\n  var _proto = ModeToggle.prototype;\n\n  _proto.handleClick = function handleClick() {\n    switch (this.next) {\n      case NEXT_ACTION.SHOW_ALL:\n        this.editor.setView({\n          html: true,\n          md: true\n        });\n        break;\n\n      case NEXT_ACTION.SHOW_HTML:\n        this.editor.setView({\n          html: true,\n          md: false\n        });\n        break;\n\n      case NEXT_ACTION.SHOW_MD:\n        this.editor.setView({\n          html: false,\n          md: true\n        });\n        break;\n    }\n  };\n\n  _proto.handleChange = function handleChange(view) {\n    this.setState({\n      view: view\n    });\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.editor.on('viewchange', this.handleChange);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.editor.off('viewchange', this.handleChange);\n  };\n\n  _proto.getDisplayInfo = function getDisplayInfo() {\n    var next = this.next;\n\n    switch (next) {\n      case NEXT_ACTION.SHOW_ALL:\n        return {\n          icon: 'view-split',\n          title: 'All'\n        };\n\n      case NEXT_ACTION.SHOW_HTML:\n        return {\n          icon: 'visibility',\n          title: 'Preview'\n        };\n\n      default:\n        return {\n          icon: 'keyboard',\n          title: 'Editor'\n        };\n    }\n  };\n\n  _proto.render = function render() {\n    if (this.isDisplay) {\n      var display = this.getDisplayInfo();\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: \"button button-type-mode\",\n        title: i18n.get(\"btnMode\" + display.title),\n        onClick: this.handleClick\n      }, /*#__PURE__*/React.createElement(Icon, {\n        type: display.icon\n      }));\n    }\n\n    return null;\n  };\n\n  _createClass(ModeToggle, [{\n    key: \"isDisplay\",\n    get: function get() {\n      var canView = this.editorConfig.canView;\n\n      if (canView) {\n        // 至少有两种情况可以显示的时候，才会显示切换按钮\n        return [canView.html, canView.md, canView.both].filter(function (it) {\n          return it;\n        }).length >= 2;\n      }\n\n      return false;\n    }\n    /**\n     * 显示标准：\n     * 两个都显示的时候，点击显示MD，隐藏HTML\n     * 只显示HTML的时候，点击全部显示\n     * 只显示MD的时候，点击显示HTML，隐藏MD\n     * 如果当前标准因canView不可用，则顺延至下一个\n     * 如果都不可用，则返回当前状态\n     */\n\n  }, {\n    key: \"next\",\n    get: function get() {\n      var canView = this.editorConfig.canView;\n      var view = this.state.view;\n      var actions = [NEXT_ACTION.SHOW_ALL, NEXT_ACTION.SHOW_MD, NEXT_ACTION.SHOW_HTML];\n\n      if (canView) {\n        if (!canView.both) {\n          actions.splice(actions.indexOf(NEXT_ACTION.SHOW_ALL), 1);\n        }\n\n        if (!canView.md) {\n          actions.splice(actions.indexOf(NEXT_ACTION.SHOW_MD), 1);\n        }\n\n        if (!canView.html) {\n          actions.splice(actions.indexOf(NEXT_ACTION.SHOW_HTML), 1);\n        }\n      }\n\n      var current = NEXT_ACTION.SHOW_MD;\n\n      if (view.html) {\n        current = NEXT_ACTION.SHOW_HTML;\n      }\n\n      if (view.html && view.md) {\n        current = NEXT_ACTION.SHOW_ALL;\n      }\n\n      if (actions.length === 0) return current;\n      if (actions.length === 1) return actions[0];\n      var index = actions.indexOf(current);\n      return index < actions.length - 1 ? actions[index + 1] : actions[0];\n    }\n  }]);\n\n  return ModeToggle;\n}(PluginComponent);\n\nModeToggle.pluginName = 'mode-toggle';\nModeToggle.align = 'right';\nexport default ModeToggle;","import _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\n\nvar TableList = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(TableList, _React$Component);\n\n  function TableList(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.config = {\n      padding: 3,\n      width: 20,\n      height: 20\n    };\n    var _props$maxRow = props.maxRow,\n        maxRow = _props$maxRow === void 0 ? 5 : _props$maxRow,\n        _props$maxCol = props.maxCol,\n        maxCol = _props$maxCol === void 0 ? 6 : _props$maxCol;\n    _this.state = {\n      maxRow: maxRow,\n      maxCol: maxCol,\n      list: _this.formatTableModel(maxRow, maxCol)\n    };\n    return _this;\n  }\n\n  var _proto = TableList.prototype;\n\n  _proto.formatTableModel = function formatTableModel(maxRow, maxCol) {\n    if (maxRow === void 0) {\n      maxRow = 0;\n    }\n\n    if (maxCol === void 0) {\n      maxCol = 0;\n    }\n\n    var result = new Array(maxRow).fill(undefined);\n    return result.map(function (_) {\n      return new Array(maxCol).fill(0);\n    });\n  };\n\n  _proto.calcWrapStyle = function calcWrapStyle() {\n    var _this$state = this.state,\n        maxRow = _this$state.maxRow,\n        maxCol = _this$state.maxCol;\n    var _this$config = this.config,\n        width = _this$config.width,\n        height = _this$config.height,\n        padding = _this$config.padding;\n    var wrapWidth = (width + padding) * maxCol - padding;\n    var wrapHeight = (height + padding) * maxRow - padding;\n    return {\n      width: wrapWidth + \"px\",\n      height: wrapHeight + \"px\"\n    };\n  };\n\n  _proto.calcItemStyle = function calcItemStyle(row, col) {\n    if (row === void 0) {\n      row = 0;\n    }\n\n    if (col === void 0) {\n      col = 0;\n    }\n\n    var _this$config2 = this.config,\n        width = _this$config2.width,\n        height = _this$config2.height,\n        padding = _this$config2.padding;\n    var top = (height + padding) * row;\n    var left = (width + padding) * col;\n    return {\n      top: top + \"px\",\n      left: left + \"px\"\n    };\n  };\n\n  _proto.getList = function getList(i, j) {\n    var list = this.state.list;\n    return list.map(function (v, row) {\n      return v.map(function (_, col) {\n        return row <= i && col <= j ? 1 : 0;\n      });\n    });\n  };\n\n  _proto.handleHover = function handleHover(i, j) {\n    this.setState({\n      list: this.getList(i, j)\n    });\n  };\n\n  _proto.handleSetTable = function handleSetTable(i, j) {\n    var onSetTable = this.props.onSetTable;\n\n    if (typeof onSetTable === 'function') {\n      onSetTable({\n        row: i + 1,\n        col: j + 1\n      });\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (this.props.visibility === false && prevProps.visibility !== this.props.visibility) {\n      this.setState({\n        list: this.getList(-1, -1)\n      });\n    }\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"table-list wrap\",\n      style: this.calcWrapStyle()\n    }, this.state.list.map(function (row, i) {\n      return row.map(function (col, j) {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          className: \"list-item \" + (col === 1 ? 'active' : ''),\n          key: i + \"-\" + j,\n          style: _this2.calcItemStyle(i, j),\n          onMouseOver: _this2.handleHover.bind(_this2, i, j),\n          onClick: _this2.handleSetTable.bind(_this2, i, j)\n        });\n      });\n    }));\n  };\n\n  return TableList;\n}(React.Component);\n\nexport default TableList;","import _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport DropList from '../../components/DropList';\nimport Icon from '../../components/Icon';\nimport i18n from '../../i18n';\nimport { PluginComponent } from '../Plugin';\nimport TableList from './table';\n\nvar Table = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(Table, _PluginComponent);\n\n  function Table(props) {\n    var _this;\n\n    _this = _PluginComponent.call(this, props) || this;\n    _this.show = _this.show.bind(_assertThisInitialized(_this));\n    _this.hide = _this.hide.bind(_assertThisInitialized(_this));\n    _this.state = {\n      show: false\n    };\n    return _this;\n  }\n\n  var _proto = Table.prototype;\n\n  _proto.show = function show() {\n    this.setState({\n      show: true\n    });\n  };\n\n  _proto.hide = function hide() {\n    this.setState({\n      show: false\n    });\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    var config = this.editorConfig.table || this.props.config;\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-table\",\n      title: i18n.get('btnTable'),\n      onMouseEnter: this.show,\n      onMouseLeave: this.hide\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"grid\"\n    }), /*#__PURE__*/React.createElement(DropList, {\n      show: this.state.show,\n      onClose: this.hide\n    }, /*#__PURE__*/React.createElement(TableList, {\n      visibility: this.state.show,\n      maxRow: config.maxRow,\n      maxCol: config.maxCol,\n      onSetTable: function onSetTable(option) {\n        return _this2.editor.insertMarkdown('table', option);\n      }\n    })));\n  };\n\n  return Table;\n}(PluginComponent);\n\nTable.pluginName = 'table';\nTable.defaultConfig = {\n  maxRow: 6,\n  maxCol: 6\n};\nexport { Table as default };","import Editor from './editor';\nimport AutoResize from './plugins/autoResize';\nimport BlockCodeBlock from './plugins/block/code-block';\nimport BlockCodeInline from './plugins/block/code-inline';\nimport BlockQuote from './plugins/block/quote';\nimport BlockWrap from './plugins/block/wrap';\nimport Clear from './plugins/clear';\nimport FontBold from './plugins/font/bold';\nimport FontItalic from './plugins/font/italic';\nimport FontStrikethrough from './plugins/font/strikethrough';\nimport FontUnderline from './plugins/font/underline';\nimport FullScreen from './plugins/fullScreen';\nimport Header from './plugins/header';\nimport Image from './plugins/Image';\nimport Link from './plugins/link';\nimport ListOrdered from './plugins/list/ordered';\nimport ListUnordered from './plugins/list/unordered';\nimport Logger from './plugins/logger';\nimport ModeToggle from './plugins/modeToggle';\nimport Table from './plugins/table';\nimport TabInsert from './plugins/tabInsert';\nimport { PluginComponent } from './plugins/Plugin';\nimport DropList from './components/DropList/index'; // 注册默认插件\n\nEditor.use(Header);\nEditor.use(FontBold);\nEditor.use(FontItalic);\nEditor.use(FontUnderline);\nEditor.use(FontStrikethrough);\nEditor.use(ListUnordered);\nEditor.use(ListOrdered);\nEditor.use(BlockQuote);\nEditor.use(BlockWrap);\nEditor.use(BlockCodeInline);\nEditor.use(BlockCodeBlock);\nEditor.use(Table);\nEditor.use(Image);\nEditor.use(Link);\nEditor.use(Clear);\nEditor.use(Logger);\nEditor.use(ModeToggle);\nEditor.use(FullScreen); // 导出声明\n// 导出工具组件\n\nexport { DropList };\nexport { PluginComponent };\n// 导出实用工具\nexport { default as getDecorated } from './utils/decorate'; // 导出内置插件\n\nexport var Plugins = {\n  Header: Header,\n  FontBold: FontBold,\n  FontItalic: FontItalic,\n  FontUnderline: FontUnderline,\n  FontStrikethrough: FontStrikethrough,\n  ListUnordered: ListUnordered,\n  ListOrdered: ListOrdered,\n  BlockQuote: BlockQuote,\n  BlockWrap: BlockWrap,\n  BlockCodeInline: BlockCodeInline,\n  BlockCodeBlock: BlockCodeBlock,\n  Table: Table,\n  Image: Image,\n  Link: Link,\n  Clear: Clear,\n  Logger: Logger,\n  ModeToggle: ModeToggle,\n  FullScreen: FullScreen,\n  AutoResize: AutoResize,\n  TabInsert: TabInsert\n}; // 导出编辑器\n\nexport default Editor;","import {MarkdownDocumentModel} from '../../types';\r\nimport {useCreateAuthenticatedFetch} from '../useCreateAuthenticatedFetch';\r\nimport baseUrl from '../baseUrl';\r\nimport {handleResponse} from '../handleResponse';\r\nimport {\r\n    useMutation,\r\n    UseMutationResult,\r\n    UseMutationOptions,\r\n    useQueryClient\r\n} from '@tanstack/react-query';\r\n\r\nconst useCreateMarkdownDocument = (\r\n    options?: UseMutationOptions<\r\n        MarkdownDocumentModel,\r\n        Error,\r\n        MarkdownDocumentModel\r\n    >\r\n): UseMutationResult<MarkdownDocumentModel, Error, MarkdownDocumentModel> => {\r\n    const authenticatedFetch = useCreateAuthenticatedFetch();\r\n    const queryClient = useQueryClient();\r\n\r\n    return useMutation({\r\n        mutationFn: async (document: MarkdownDocumentModel) => {\r\n            const response = await authenticatedFetch(\r\n                `${baseUrl}/api/markdown-documents`,\r\n                {\r\n                    method: 'POST',\r\n                    headers: {'Content-Type': 'application/json'},\r\n                    body: JSON.stringify(document)\r\n                }\r\n            );\r\n            return handleResponse(response);\r\n        },\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries({queryKey: ['markdownDocument']});\r\n        },\r\n        ...options\r\n    });\r\n};\r\n\r\nexport default useCreateMarkdownDocument;\r\n","import {MarkdownDocumentModel} from '../../types';\r\nimport {UseQueryOptions, UseQueryResult, useQuery} from '@tanstack/react-query';\r\nimport baseUrl from '../baseUrl';\r\nimport {useCreateAuthenticatedFetch} from '../useCreateAuthenticatedFetch';\r\nimport {handleResponse} from '../handleResponse';\r\nimport ProblemDetailsError from '../ProblemDetailsError';\r\n\r\ntype MarkdownDocumentByIdQueryOptions = Omit<\r\n    UseQueryOptions<\r\n        MarkdownDocumentModel,\r\n        Error | ProblemDetailsError,\r\n        MarkdownDocumentModel,\r\n        readonly unknown[]\r\n    >,\r\n    'queryKey' | 'queryFn'\r\n>;\r\n\r\nconst useGetMarkdownDocumentById = (\r\n    id: string,\r\n    options?: MarkdownDocumentByIdQueryOptions\r\n): UseQueryResult<MarkdownDocumentModel, Error | ProblemDetailsError> => {\r\n    const queryKey = ['markdownDocumentById', id];\r\n    const url = `${baseUrl}/api/markdown-documents/${id}`;\r\n    const authenticatedFetch = useCreateAuthenticatedFetch();\r\n\r\n    const queryFn = async (): Promise<MarkdownDocumentModel> => {\r\n        const response = await authenticatedFetch(url);\r\n        return handleResponse(response);\r\n    };\r\n\r\n    return useQuery({\r\n        queryKey,\r\n        queryFn,\r\n        ...options\r\n    });\r\n};\r\n\r\nexport default useGetMarkdownDocumentById;\r\n","import {MarkdownDocumentModel} from '../../types';\r\nimport {useCreateAuthenticatedFetch} from '../useCreateAuthenticatedFetch';\r\nimport baseUrl from '../baseUrl';\r\nimport {handleResponse} from '../handleResponse';\r\nimport {\r\n    useMutation,\r\n    UseMutationResult,\r\n    UseMutationOptions,\r\n    useQueryClient\r\n} from '@tanstack/react-query';\r\n\r\nconst useUpdateMarkdownDocument = (\r\n    options?: UseMutationOptions<\r\n        MarkdownDocumentModel,\r\n        Error,\r\n        MarkdownDocumentModel\r\n    >\r\n): UseMutationResult<MarkdownDocumentModel, Error, MarkdownDocumentModel> => {\r\n    const authenticatedFetch = useCreateAuthenticatedFetch();\r\n    const queryClient = useQueryClient();\r\n\r\n    return useMutation({\r\n        mutationFn: async (document: MarkdownDocumentModel) => {\r\n            const response = await authenticatedFetch(\r\n                `${baseUrl}/api/markdown-documents/${document.id}`,\r\n                {\r\n                    method: 'PUT',\r\n                    headers: {'Content-Type': 'application/json'},\r\n                    body: JSON.stringify(document)\r\n                }\r\n            );\r\n            return handleResponse(response);\r\n        },\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries({queryKey: ['markdownDocument']});\r\n        },\r\n        ...options\r\n    });\r\n};\r\n\r\nexport default useUpdateMarkdownDocument;\r\n","/**\r\n * Checks if a character is valid for use in URLs without encoding.\r\n * Based on RFC 3986 allowed characters.\r\n */\r\nexport default function isValidUrlCharacter(c: string): boolean {\r\n    // RFC 3986 unreserved characters (can be used unencoded in URLs)\r\n    const isUnreservedChar =\r\n        (c >= 'a' && c <= 'z') ||\r\n        (c >= 'A' && c <= 'Z') ||\r\n        (c >= '0' && c <= '9') ||\r\n        c === '-' ||\r\n        c === '.' ||\r\n        c === '_' ||\r\n        c === '~';\r\n\r\n    // Additional commonly allowed URL path characters (but not query or fragment)\r\n    const isPathSeparator = c === '/';\r\n\r\n    return isUnreservedChar || isPathSeparator;\r\n}\r\n","import isValidUrlCharacter from '../../lib/isValidUrlCharacter';\r\n\r\nexport default function validateDocumentPath(path: string): string | true {\r\n    // Check if path is empty\r\n    if (!path || path.trim() === '') {\r\n        return 'Path cannot be empty.';\r\n    }\r\n\r\n    // Check if path starts with a slash\r\n    if (path.startsWith('/')) {\r\n        return \"Path should not start with a '/'.\";\r\n    }\r\n\r\n    // Check for consecutive slashes\r\n    for (let i = 0; i < path.length - 1; i++) {\r\n        if (path[i] === '/' && path[i + 1] === '/') {\r\n            return \"Path cannot contain consecutive '/' characters.\";\r\n        }\r\n    }\r\n\r\n    // Check for invalid URL characters\r\n    for (let i = 0; i < path.length; i++) {\r\n        const c = path[i];\r\n\r\n        if (!isValidUrlCharacter(c)) {\r\n            return `Invalid character '${c}' found in path.`;\r\n        }\r\n    }\r\n\r\n    // Check if path ends with a slash\r\n    if (path.endsWith('/')) {\r\n        return \"Path must end with a filename, not a '/'.\";\r\n    }\r\n\r\n    // Extract and validate filename\r\n    const lastSlash = path.lastIndexOf('/');\r\n    let fileName: string;\r\n\r\n    if (lastSlash === -1) {\r\n        // No slashes in the path, so the entire path is the filename\r\n        fileName = path;\r\n    } else {\r\n        fileName = path.substring(lastSlash + 1);\r\n    }\r\n\r\n    if (!fileName || fileName.trim() === '') {\r\n        return 'Filename cannot be empty.';\r\n    }\r\n\r\n    // Check if filename ends with .md\r\n    if (!fileName.toLowerCase().endsWith('.md')) {\r\n        return \"Filename must end with '.md'.\";\r\n    }\r\n\r\n    return true;\r\n}\r\n","import React, {useState, useEffect, useCallback, useRef} from 'react';\r\nimport {useParams, useNavigate} from 'react-router-dom';\r\nimport {\r\n    Card,\r\n    CardBody,\r\n    Form,\r\n    FormGroup,\r\n    Label,\r\n    Input,\r\n    Button,\r\n    Row,\r\n    Col\r\n} from 'reactstrap';\r\nimport {Save, ArrowLeft} from 'lucide-react';\r\nimport {useForm, Controller} from 'react-hook-form';\r\nimport {toast} from 'react-toastify';\r\nimport MdEditor, {Plugins} from 'react-markdown-editor-lite';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport 'react-markdown-editor-lite/lib/index.css';\r\nimport {DocumentGroup, MarkdownDocumentModel} from '../../types';\r\nimport useCreateMarkdownDocument from '../../api/documents/useCreateMarkdownDocument';\r\nimport useGetMarkdownDocumentById from '../../api/documents/useGetMarkdownDocumentById';\r\nimport useUpdateMarkdownDocument from '../../api/documents/useUpdateMarkdownDocument';\r\nimport Spinner from '../utility/Spinner';\r\nimport ErrorDisplay from '../utility/ErrorDisplay';\r\nimport useLocalStorage from '../../hooks/useLocalStorage';\r\nimport validateDocumentPath from './validateDocumentPath';\r\nimport DisplayFormError from '../utility/DisplayFormError';\r\nimport MarkdownRenderer from '../utility/markdown/MarkdownRenderer';\r\nimport useUploadContentFile from '../../api/contents/useUploadContentFile.ts';\r\n\r\nMdEditor.use(Plugins.Logger);\r\n\r\nconst EditDocumentPage: React.FC = () => {\r\n    const {id = '_'} = useParams<{id: string}>();\r\n    const navigate = useNavigate();\r\n    const [documentGroup, setDocumentGroup] = useLocalStorage<DocumentGroup>(\r\n        'documentGroup',\r\n        'docs'\r\n    );\r\n\r\n    const isNew = id === '_';\r\n    const editorRef = useRef<MdEditor | null>(null);\r\n    const [editorMounted, setEditorMounted] = useState(false);\r\n    const pasteHandlerAttachedRef = useRef(false);\r\n    const uploadMutation = useUploadContentFile();\r\n\r\n    // State to track base64 images that need replacing\r\n    const [pendingImageUploads, setPendingImageUploads] = useState<\r\n        {base64Data: string; fileName: string}[]\r\n    >([]);\r\n\r\n    // State for markdown editor\r\n    const [markdownContent, setMarkdownContent] = useState<string>('');\r\n\r\n    // Form setup\r\n    const {\r\n        control,\r\n        handleSubmit,\r\n        formState: {errors},\r\n        reset,\r\n        watch\r\n    } = useForm<MarkdownDocumentModel>({\r\n        defaultValues: {\r\n            id: null,\r\n            documentGroup,\r\n            path: '',\r\n            content: '',\r\n            createdAt: new Date().toISOString(),\r\n            updatedAt: null\r\n        }\r\n    });\r\n\r\n    const watchDocumentGroup = watch('documentGroup');\r\n\r\n    useEffect(() => {\r\n        if (isNew && watchDocumentGroup) {\r\n            setDocumentGroup(watchDocumentGroup);\r\n        }\r\n    }, [watchDocumentGroup, setDocumentGroup, isNew]);\r\n\r\n    // Fetch existing document if editing\r\n    const {\r\n        data: document,\r\n        error: fetchError,\r\n        isLoading: isFetching,\r\n        refetch\r\n    } = useGetMarkdownDocumentById(id, {\r\n        enabled: !isNew\r\n    });\r\n\r\n    // Create and update mutations\r\n    const createDocument = useCreateMarkdownDocument({\r\n        onSuccess: (data: MarkdownDocumentModel) => {\r\n            toast.success('Document created successfully');\r\n            navigate(\r\n                `/sysadmin/documents/edit/${data.id}?group=${documentGroup}`\r\n            );\r\n        },\r\n        onError: (error: Error) => {\r\n            toast.error(`Error creating document: ${error.message}`);\r\n        }\r\n    });\r\n\r\n    const updateDocument = useUpdateMarkdownDocument({\r\n        onSuccess: () => {\r\n            refetch().then(() => {\r\n                toast.success('Document updated successfully');\r\n            });\r\n        },\r\n        onError: (error: Error) => {\r\n            toast.error(`Error updating document: ${error.message}`);\r\n        }\r\n    });\r\n\r\n    // Generate an image path based on document path\r\n    const generateImagePath = useCallback(\r\n        (docPath: string, fileName: string): string => {\r\n            if (!docPath) {\r\n                return fileName;\r\n            }\r\n\r\n            // Remove file extension if exists\r\n            const pathWithoutExt = docPath.replace(/\\.[^/.]+$/, '');\r\n            return `${pathWithoutExt}/${fileName}`;\r\n        },\r\n        []\r\n    );\r\n\r\n    // Handle form submission\r\n    const onSubmit = async (data: MarkdownDocumentModel) => {\r\n        // Process any pending image uploads before saving\r\n        let updatedContent = markdownContent;\r\n\r\n        // Only process uploads if there are pending images\r\n        if (pendingImageUploads.length > 0) {\r\n            try {\r\n                // Make the submissions sequentially for each pending image\r\n                for (const upload of pendingImageUploads) {\r\n                    const {base64Data, fileName} = upload;\r\n\r\n                    // Convert base64 to Blob\r\n                    const base64Response = await fetch(base64Data);\r\n                    const blob = await base64Response.blob();\r\n\r\n                    // Create a File object from Blob\r\n                    const file = new File([blob], fileName, {type: blob.type});\r\n\r\n                    // Generate path for the image\r\n                    const imagePath = generateImagePath(data.path, fileName);\r\n\r\n                    // Upload the file\r\n                    await uploadMutation.mutateAsync({\r\n                        path: imagePath,\r\n                        file\r\n                    });\r\n\r\n                    // Replace the base64 reference in the markdown with the actual path\r\n                    updatedContent = updatedContent.replace(\r\n                        base64Data,\r\n                        `~/api/contents/files/${imagePath}`\r\n                    );\r\n                }\r\n\r\n                // Clear pending uploads after processing\r\n                setPendingImageUploads([]);\r\n            } catch (error) {\r\n                toast.error(\r\n                    `Error uploading images: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n                );\r\n                return; // Stop submission if image uploads fail\r\n            }\r\n        }\r\n\r\n        // Set the finalized content to the data model\r\n        data.content = updatedContent;\r\n\r\n        if (isNew) {\r\n            createDocument.mutate(data);\r\n        } else {\r\n            updateDocument.mutate(data);\r\n        }\r\n    };\r\n\r\n    // Initialize form with fetched data\r\n    useEffect(() => {\r\n        if (document) {\r\n            reset(document);\r\n            setMarkdownContent(document.content || '');\r\n        }\r\n    }, [document, reset]);\r\n\r\n    // Handle markdown editor change\r\n    const handleEditorChange = ({text}: {text: string}) => {\r\n        setMarkdownContent(text);\r\n    };\r\n\r\n    // Use useEffect to track when the editor ref is set\r\n    useEffect(() => {\r\n        // We need a regular interval to check for the editor ref\r\n        // because the ref might be set after initial render\r\n        const checkEditorInterval = setInterval(() => {\r\n            if (editorRef.current && !editorMounted) {\r\n                console.log('Editor reference established');\r\n                setEditorMounted(true);\r\n                clearInterval(checkEditorInterval);\r\n            }\r\n        }, 100); // Check every 100ms\r\n\r\n        return () => {\r\n            clearInterval(checkEditorInterval);\r\n        };\r\n    }, [editorMounted]);\r\n\r\n    // Convert a file to base64\r\n    const readFileAsBase64 = (file: Blob): Promise<string> => {\r\n        return new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            reader.onload = () => {\r\n                if (typeof reader.result === 'string') {\r\n                    resolve(reader.result);\r\n                } else {\r\n                    reject(new Error('Failed to convert image to base64'));\r\n                }\r\n            };\r\n            reader.onerror = () => {\r\n                reject(new Error('Failed to read file'));\r\n            };\r\n            reader.readAsDataURL(file);\r\n        });\r\n    };\r\n\r\n    // Custom handler for pasting images\r\n    const handlePaste = useCallback(async (event: ClipboardEvent) => {\r\n        console.log('Paste event triggered');\r\n        const items = event.clipboardData?.items;\r\n        if (!items) {\r\n            console.log('No clipboard data available');\r\n            return false;\r\n        }\r\n\r\n        // Safely check if editor is available\r\n        const editor = editorRef.current;\r\n        if (!editor) {\r\n            console.warn('Editor not available during paste event');\r\n            return false;\r\n        }\r\n\r\n        console.log(`Found ${items.length} items in clipboard`);\r\n\r\n        // Check for images in the clipboard\r\n        for (let i = 0; i < items.length; i++) {\r\n            if (items[i].type.indexOf('image') === 0) {\r\n                event.preventDefault();\r\n\r\n                const blob = items[i].getAsFile();\r\n                if (!blob) continue;\r\n\r\n                try {\r\n                    // Convert the image to base64\r\n                    const base64String = await readFileAsBase64(blob);\r\n\r\n                    // Generate a UUID for filename uniqueness\r\n                    const uniqueId = uuidv4().slice(0, 8);\r\n                    const fileExt = blob.type.split('/')[1] || 'png';\r\n                    const fileName = `image-${uniqueId}.${fileExt}`;\r\n\r\n                    // Add to pending uploads\r\n                    setPendingImageUploads(prev => [\r\n                        ...prev,\r\n                        {base64Data: base64String, fileName}\r\n                    ]);\r\n\r\n                    // Insert the markdown image with the base64 data directly\r\n                    const imageMarkdown = `![image](${base64String})`;\r\n\r\n                    // Use the built-in insertText method of the editor\r\n                    editor.insertText(imageMarkdown);\r\n\r\n                    return true; // Indicate we've handled the paste\r\n                } catch (error) {\r\n                    console.error('Image paste error:', error);\r\n                }\r\n            }\r\n        }\r\n\r\n        return false; // Let the default paste handler handle this\r\n    }, []);\r\n\r\n    // Setup paste event listener when editor is mounted\r\n    useEffect(() => {\r\n        if (\r\n            !editorMounted ||\r\n            !editorRef.current ||\r\n            pasteHandlerAttachedRef.current\r\n        )\r\n            return;\r\n\r\n        let textArea: HTMLElement;\r\n        try {\r\n            // Get the textarea element to attach our paste handler\r\n            textArea = editorRef.current.getMdElement();\r\n\r\n            if (!textArea) {\r\n                console.warn('Could not find editor text area element');\r\n                return;\r\n            }\r\n\r\n            // Our paste handler\r\n            const pasteHandler = async (e: ClipboardEvent) => {\r\n                const handled = await handlePaste(e);\r\n                if (!handled) {\r\n                    // If we didn't handle it, let the default behavior continue\r\n                    return;\r\n                }\r\n            };\r\n\r\n            // Add event listener\r\n            textArea.addEventListener('paste', pasteHandler);\r\n            pasteHandlerAttachedRef.current = true;\r\n\r\n            // Log that the paste handler was successfully attached\r\n            console.log('Paste handler attached successfully to', textArea);\r\n\r\n            // Cleanup\r\n            return () => {\r\n                try {\r\n                    if (textArea) {\r\n                        textArea.removeEventListener('paste', pasteHandler);\r\n                        console.log('Paste handler removed');\r\n                        pasteHandlerAttachedRef.current = false;\r\n                    }\r\n                } catch (cleanupError) {\r\n                    console.error(\r\n                        'Error removing paste handler:',\r\n                        cleanupError\r\n                    );\r\n                }\r\n            };\r\n        } catch (error) {\r\n            console.error('Error setting up paste handler:', error);\r\n        }\r\n    }, [editorMounted, handlePaste]);\r\n\r\n    // Show loading state\r\n    if (!isNew && isFetching) {\r\n        return <Spinner />;\r\n    }\r\n\r\n    // Show error state\r\n    if (!isNew && fetchError) {\r\n        return (\r\n            <ErrorDisplay error={fetchError} title=\"Unable to fetch document\" />\r\n        );\r\n    }\r\n\r\n    // Combine loading states\r\n    const isLoading =\r\n        createDocument.isPending ||\r\n        updateDocument.isPending ||\r\n        uploadMutation.isPending;\r\n\r\n    return (\r\n        <>\r\n            <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n                <h1>{isNew ? 'Create New' : 'Edit'} Document</h1>\r\n                <Button\r\n                    color=\"secondary\"\r\n                    onClick={() => navigate('/sysadmin/documents')}\r\n                >\r\n                    <ArrowLeft size={18} className=\"me-2\" /> Back to List\r\n                </Button>\r\n            </div>\r\n\r\n            <Card>\r\n                <CardBody>\r\n                    <Form onSubmit={handleSubmit(onSubmit)}>\r\n                        <Row>\r\n                            <Col md={6}>\r\n                                <FormGroup>\r\n                                    <Label for=\"documentGroup\">\r\n                                        Document Group\r\n                                    </Label>\r\n                                    <Controller\r\n                                        name=\"documentGroup\"\r\n                                        control={control}\r\n                                        rules={{\r\n                                            required:\r\n                                                'Document group is required'\r\n                                        }}\r\n                                        render={({field}) => (\r\n                                            <Input\r\n                                                {...field}\r\n                                                type=\"select\"\r\n                                                id=\"documentGroup\"\r\n                                                disabled={!isNew}\r\n                                            >\r\n                                                <option value=\"docs\">\r\n                                                    User Documentation\r\n                                                </option>\r\n                                                <option value=\"sys\">\r\n                                                    System Documentation\r\n                                                </option>\r\n                                            </Input>\r\n                                        )}\r\n                                    />\r\n                                    <DisplayFormError\r\n                                        error={errors.documentGroup}\r\n                                        fieldDisplayName=\"Document Group\"\r\n                                    />\r\n                                </FormGroup>\r\n                            </Col>\r\n                        </Row>\r\n\r\n                        <FormGroup>\r\n                            <Label for=\"path\">Path</Label>\r\n                            <Controller\r\n                                name=\"path\"\r\n                                control={control}\r\n                                rules={{\r\n                                    required: 'Path is required',\r\n                                    validate: validateDocumentPath\r\n                                }}\r\n                                render={({field}) => (\r\n                                    <Input\r\n                                        {...field}\r\n                                        type=\"text\"\r\n                                        id=\"path\"\r\n                                        placeholder=\"e.g., chapter1/introduction.md\"\r\n                                    />\r\n                                )}\r\n                            />\r\n                            <DisplayFormError\r\n                                error={errors.path}\r\n                                fieldDisplayName=\"Path\"\r\n                            />\r\n                        </FormGroup>\r\n\r\n                        <FormGroup>\r\n                            <Label for=\"content\">Content</Label>\r\n                            <div className=\"mb-2 text-muted small\">\r\n                                <strong>Tip:</strong> You can paste images\r\n                                directly into the editor. They will be uploaded\r\n                                when you save the document.\r\n                            </div>\r\n                            <MdEditor\r\n                                ref={editorRef}\r\n                                value={markdownContent}\r\n                                style={{height: '500px'}}\r\n                                onChange={handleEditorChange}\r\n                                renderHTML={text => (\r\n                                    <MarkdownRenderer content={text} />\r\n                                )}\r\n                                onFocus={() => {\r\n                                    // This ensures the editor ref is set when focused\r\n                                    if (editorRef.current) {\r\n                                        setEditorMounted(true);\r\n                                    }\r\n                                }}\r\n                            />\r\n                        </FormGroup>\r\n\r\n                        <div className=\"d-flex justify-content-end\">\r\n                            <Button\r\n                                color=\"primary\"\r\n                                type=\"submit\"\r\n                                disabled={isLoading}\r\n                            >\r\n                                {isLoading ? (\r\n                                    <Spinner />\r\n                                ) : (\r\n                                    <>\r\n                                        <Save size={18} className=\"me-2\" />\r\n                                        {isNew ? 'Create' : 'Update'} Document\r\n                                    </>\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </Form>\r\n                </CardBody>\r\n            </Card>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default EditDocumentPage;\r\n"],"names":["getRandomValues","rnds8","rng","REGEX","validate","uuid","byteToHex","i","stringify","arr","offset","v4","options","buf","rnds","Icon","props","React.createElement","NavigationBar","ToolBar","has","prefix","Events","EE","fn","context","once","addListener","emitter","event","listener","evt","clearEvent","EventEmitter","names","events","name","handlers","l","ee","listeners","a1","a2","a3","a4","a5","len","args","length","j","module","Emitter","_EventEmitter","_inheritsLoose","_this","_len","_key","globalEmitter","enUS","zhCN","I18n","_proto","locale","it","_it","langName","lang","key","placeholders","str","k","i18n","PluginComponent","_React$Component","defaultValue","_createClass","React.Component","Divider","_PluginComponent","initialSelection","_createForOfIteratorHelperLoose","o","allowArrayLike","_unsupportedIterableToArray","minLen","_arrayLikeToArray","n","arr2","isPromise","obj","repeat","num","result","isKeyMatch","cond","withKey","keyCode","aliasCommand","e","_iterator","_step","getLineAndCol","text","pos","lines","beforeLines","line","col","curLine","prevLine","nextLine","SIMPLE_DECORATOR","decorateTableText","option","_option$row","row","_option$col","rowHeader","rowData","rowDivision","colStr","_i","decorateList","type","target","count","createTextDecorated","newBlock","getDecorated","inputValue","newSelectedText","lineBreakCount","mergeObject","obj1","obj2","mergeConfig","defaultConfig","res","_extends","configs","conf","getUploadPlaceholder","file","onImageUpload","placeholder","uploaded","resolve","isCallback","handleUploaded","url","upload","Preview","React.createRef","HtmlRender","_Preview","_proto2","Editor","comp","config","_assertThisInitialized","prevProps","value","_this2","plugins","addToPlugins","DividerPlugin","_iterator2","_step2","_this3","_this$config$syncScro","syncScrollMode","markdownText","_this4","r","html","_this5","onFocus","onBlur","items","_this6","currentTarget","_text","curPos","lineInfo","emptyCurrentLine","newValue","addSymbol","symbol","isSymbol","isOrderList","toInsert","source","start","end","to","curSelection","decorateOption","curLineStart","decorate","selection","startLineInfo","afterText","wait","_this7","replaceSelected","newSelection","beforeContent","afterContent","_this8","_this$config$onChange","onChangeTrigger","rendering","data","_this9","_this10","index","_iterator3","_step3","cb","eventType","_this11","newView","enable","_this12","handler","others","_this13","queue","_this14","_this$state","view","fullScreen","_this$props","id","_this$props$className","className","style","_this$props$name","autoFocus","readOnly","showHideMenu","getPluginAt","at","isShowMenu","editorId","previewerId","BlockCodeBlock","BlockCodeInline","BlockQuote","BlockWrap","Clear","FontBold","FontItalic","FontStrikethrough","FontUnderline","FullScreen","DropList","onClose","HeaderList","header","onSelectHeader","Header","InputFile","Image","onCustomImageUpload","isCustom","Link","ListOrdered","ListUnordered","MAX_LOG_SIZE","Logger","_props","_props$maxSize","maxSize","val","skipText","current","last","history","LoggerPlugin","isNotInput","hasUndo","hasRedo","React.Fragment","NEXT_ACTION","ModeToggle","next","display","canView","actions","TableList","_props$maxRow","maxRow","_props$maxCol","maxCol","_","_this$config","width","height","padding","wrapWidth","wrapHeight","_this$config2","top","left","list","v","onSetTable","Table","Plugins","useCreateMarkdownDocument","authenticatedFetch","useCreateAuthenticatedFetch","queryClient","useQueryClient","useMutation","document","response","baseUrl","handleResponse","useGetMarkdownDocumentById","queryKey","useQuery","useUpdateMarkdownDocument","isValidUrlCharacter","c","validateDocumentPath","path","lastSlash","fileName","MdEditor","EditDocumentPage","useParams","navigate","useNavigate","documentGroup","setDocumentGroup","useLocalStorage","isNew","editorRef","useRef","editorMounted","setEditorMounted","useState","pasteHandlerAttachedRef","uploadMutation","useUploadContentFile","pendingImageUploads","setPendingImageUploads","markdownContent","setMarkdownContent","control","handleSubmit","errors","reset","watch","useForm","watchDocumentGroup","useEffect","fetchError","isFetching","refetch","createDocument","toast","error","updateDocument","generateImagePath","useCallback","docPath","onSubmit","updatedContent","base64Data","blob","imagePath","handleEditorChange","checkEditorInterval","readFileAsBase64","reject","reader","handlePaste","_a","editor","base64String","uniqueId","uuidv4","fileExt","prev","imageMarkdown","textArea","pasteHandler","cleanupError","Spinner","jsx","ErrorDisplay","isLoading","jsxs","Fragment","Button","ArrowLeft","Card","CardBody","Form","Row","Col","FormGroup","Label","Controller","field","Input","DisplayFormError","MarkdownRenderer","Save"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46]}